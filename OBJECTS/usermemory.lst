   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"usermemory.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.global	RAM
  18              		.section	.bss.RAM,"aw",%nobits
  19              		.align	2
  22              	RAM:
  23 0000 00000000 		.space	2050
  23      00000000 
  23      00000000 
  23      00000000 
  23      00000000 
  24              		.global	tmpPointer
  25              		.section	.bss.tmpPointer,"aw",%nobits
  26              		.align	2
  29              	tmpPointer:
  30 0000 00000000 		.space	4
  31              		.global	tmpLen
  32              		.section	.bss.tmpLen,"aw",%nobits
  33              		.align	2
  36              	tmpLen:
  37 0000 00000000 		.space	4
  38              		.global	EEPROM_working
  39              		.section	.bss.EEPROM_working,"aw",%nobits
  42              	EEPROM_working:
  43 0000 00       		.space	1
  44              		.global	bigFlashBuff
  45              		.section	.bss.bigFlashBuff,"aw",%nobits
  46              		.align	2
  49              	bigFlashBuff:
  50 0000 00000000 		.space	2048
  50      00000000 
  50      00000000 
  50      00000000 
  50      00000000 
  51              		.global	DeviceID
  52              		.section	.bss.DeviceID,"aw",%nobits
  53              		.align	2
  56              	DeviceID:
  57 0000 00000000 		.space	4
  58              		.section	.text.MemInit,"ax",%progbits
  59              		.align	1
  60              		.global	MemInit
  61              		.syntax unified
  62              		.thumb
  63              		.thumb_func
  65              	MemInit:
  66              	.LFB27:
  67              		.file 1 "src/usermemory.c"
   1:src/usermemory.c **** #include "usermemory.h"
   2:src/usermemory.c **** 
   3:src/usermemory.c **** #include "rtclock.h"
   4:src/usermemory.c **** #include "journal.h"
   5:src/usermemory.c **** #include "stm32f10x_flash.h"
   6:src/usermemory.c **** #include "i2c_ee.h"
   7:src/usermemory.c **** #include "mios32_iic.h"
   8:src/usermemory.c **** #include "logica.h"
   9:src/usermemory.c **** 
  10:src/usermemory.c **** #define __at(x)
  11:src/usermemory.c **** 
  12:src/usermemory.c **** #define EEPROM_A1A0   0
  13:src/usermemory.c **** #define EEPROM_DADR   (0x50|EEPROM_A1A0)
  14:src/usermemory.c **** #define MIOS32_IIC_BS_ADDR_BASE 0xA0
  15:src/usermemory.c **** 
  16:src/usermemory.c **** extern size_t strlen(const char *str);
  17:src/usermemory.c **** RAMMEM RAM;
  18:src/usermemory.c **** int tmpPointer = 0;
  19:src/usermemory.c **** int tmpLen = 0;
  20:src/usermemory.c **** bool EEPROM_working = false;
  21:src/usermemory.c **** uint16 bigFlashBuff[0x400];
  22:src/usermemory.c **** extern uint16 CountReset;
  23:src/usermemory.c **** 
  24:src/usermemory.c **** //FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
  25:src/usermemory.c **** int DeviceID;
  26:src/usermemory.c **** 
  27:src/usermemory.c **** bool GetRam(uint16, uint16*, uint16);
  28:src/usermemory.c **** bool SetRam(uint16, uint16*, uint16);
  29:src/usermemory.c **** bool GetEeprom(uint16, uint16*, uint16);
  30:src/usermemory.c **** bool SetEeprom(uint16, uint16*, uint16);
  31:src/usermemory.c **** bool GetRtc(uint16, uint16*, uint16);
  32:src/usermemory.c **** bool SetRtc(uint16, uint16*, uint16);
  33:src/usermemory.c **** bool GetFlash(uint16, uint16*, uint16);
  34:src/usermemory.c **** bool SetFlash(uint16, uint16*, uint16);
  35:src/usermemory.c **** bool Buffercmp(uint8_t *pBuffer1, uint8_t *pBuffer2, uint16_t BufferLength);
  36:src/usermemory.c **** bool GetSignature(uint16, uint16*, uint16);
  37:src/usermemory.c **** 
  38:src/usermemory.c **** //==============================================================================
  39:src/usermemory.c **** void MemInit() {
  68              		.loc 1 39 16
  69              		.cfi_startproc
  70              		@ args = 0, pretend = 0, frame = 8
  71              		@ frame_needed = 1, uses_anonymous_args = 0
  72 0000 80B5     		push	{r7, lr}
  73              	.LCFI0:
  74              		.cfi_def_cfa_offset 8
  75              		.cfi_offset 7, -8
  76              		.cfi_offset 14, -4
  77 0002 82B0     		sub	sp, sp, #8
  78              	.LCFI1:
  79              		.cfi_def_cfa_offset 16
  80 0004 00AF     		add	r7, sp, #0
  81              	.LCFI2:
  82              		.cfi_def_cfa_register 7
  40:src/usermemory.c **** 
  41:src/usermemory.c **** 	FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
  83              		.loc 1 41 12
  84 0006 304B     		ldr	r3, .L4
  85 0008 3B60     		str	r3, [r7]
  42:src/usermemory.c **** 	//EEPROM INIT
  43:src/usermemory.c **** 	//I2C_EE_Init();
  44:src/usermemory.c **** 	I2C_Configuration();
  86              		.loc 1 44 2
  87 000a 304B     		ldr	r3, .L4+4
  88 000c 9847     		blx	r3
  89              	.LVL0:
  45:src/usermemory.c **** 	//MIOS32_IIC_Init(0);
  46:src/usermemory.c **** 	//Flash_Init();
  47:src/usermemory.c **** 	FLASH_Unlock();
  90              		.loc 1 47 2
  91 000e 304B     		ldr	r3, .L4+8
  92 0010 9847     		blx	r3
  93              	.LVL1:
  48:src/usermemory.c **** 	FLASH_SetLatency(FLASH_Latency_1);
  94              		.loc 1 48 2
  95 0012 0120     		movs	r0, #1
  96 0014 2F4B     		ldr	r3, .L4+12
  97 0016 9847     		blx	r3
  98              	.LVL2:
  49:src/usermemory.c **** 
  50:src/usermemory.c **** 	int i;
  51:src/usermemory.c **** 	MemManInit();
  99              		.loc 1 51 2
 100 0018 2F4B     		ldr	r3, .L4+16
 101 001a 9847     		blx	r3
 102              	.LVL3:
  52:src/usermemory.c **** 	for (i = 0; i < (DEVICE_RAMMEM_WORDS); i++) {
 103              		.loc 1 52 9
 104 001c 0023     		movs	r3, #0
 105 001e 7B60     		str	r3, [r7, #4]
 106              		.loc 1 52 2
 107 0020 07E0     		b	.L2
 108              	.L3:
  53:src/usermemory.c **** 		RAM.dwords[i] = 0;
 109              		.loc 1 53 17 discriminator 3
 110 0022 2E4A     		ldr	r2, .L4+20
 111 0024 7B68     		ldr	r3, [r7, #4]
 112 0026 0021     		movs	r1, #0
 113 0028 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
  52:src/usermemory.c **** 	for (i = 0; i < (DEVICE_RAMMEM_WORDS); i++) {
 114              		.loc 1 52 42 discriminator 3
 115 002c 7B68     		ldr	r3, [r7, #4]
 116 002e 0133     		adds	r3, r3, #1
 117 0030 7B60     		str	r3, [r7, #4]
 118              	.L2:
  52:src/usermemory.c **** 	for (i = 0; i < (DEVICE_RAMMEM_WORDS); i++) {
 119              		.loc 1 52 2 discriminator 1
 120 0032 7B68     		ldr	r3, [r7, #4]
 121 0034 B3F5806F 		cmp	r3, #1024
 122 0038 F3DB     		blt	.L3
  54:src/usermemory.c **** 	}
  55:src/usermemory.c **** 
  56:src/usermemory.c **** 	memunit[0].startaddr = 0x0000;
 123              		.loc 1 56 23
 124 003a 294B     		ldr	r3, .L4+24
 125 003c 0022     		movs	r2, #0
 126 003e 1A60     		str	r2, [r3]
  57:src/usermemory.c **** 	memunit[0].endaddr = DEVICE_RAMMEM_WORDS;
 127              		.loc 1 57 21
 128 0040 274B     		ldr	r3, .L4+24
 129 0042 4FF48062 		mov	r2, #1024
 130 0046 5A60     		str	r2, [r3, #4]
  58:src/usermemory.c **** 	memunit[0].GetMem = GetRam;
 131              		.loc 1 58 20
 132 0048 254B     		ldr	r3, .L4+24
 133 004a 264A     		ldr	r2, .L4+28
 134 004c DA60     		str	r2, [r3, #12]
  59:src/usermemory.c **** 	memunit[0].SetMem = SetRam;
 135              		.loc 1 59 20
 136 004e 244B     		ldr	r3, .L4+24
 137 0050 254A     		ldr	r2, .L4+32
 138 0052 1A61     		str	r2, [r3, #16]
  60:src/usermemory.c **** 
  61:src/usermemory.c **** #if(DEVICE_RAMMEM_WORDS!=0x400)
  62:src/usermemory.c **** #error Check useer memory address table !!!
  63:src/usermemory.c **** #endif
  64:src/usermemory.c **** 
  65:src/usermemory.c **** 	memunit[4].startaddr = 0x0400;
 139              		.loc 1 65 23
 140 0054 224B     		ldr	r3, .L4+24
 141 0056 4FF48062 		mov	r2, #1024
 142 005a 1A65     		str	r2, [r3, #80]
  66:src/usermemory.c **** 	memunit[4].endaddr = 0x480;
 143              		.loc 1 66 21
 144 005c 204B     		ldr	r3, .L4+24
 145 005e 4FF49062 		mov	r2, #1152
 146 0062 5A65     		str	r2, [r3, #84]
  67:src/usermemory.c **** 	memunit[4].GetMem = GetSignature;
 147              		.loc 1 67 20
 148 0064 1E4B     		ldr	r3, .L4+24
 149 0066 214A     		ldr	r2, .L4+36
 150 0068 DA65     		str	r2, [r3, #92]
  68:src/usermemory.c **** 	//	memunit[1].SetMem = SetRam;
  69:src/usermemory.c **** 
  70:src/usermemory.c **** 	memunit[1].startaddr = 0x1000;
 151              		.loc 1 70 23
 152 006a 1D4B     		ldr	r3, .L4+24
 153 006c 4FF48052 		mov	r2, #4096
 154 0070 5A61     		str	r2, [r3, #20]
  71:src/usermemory.c **** 	memunit[1].endaddr = 0x1031;
 155              		.loc 1 71 21
 156 0072 1B4B     		ldr	r3, .L4+24
 157 0074 41F23102 		movw	r2, #4145
 158 0078 9A61     		str	r2, [r3, #24]
  72:src/usermemory.c **** 	memunit[1].GetMem = GetRtc;
 159              		.loc 1 72 20
 160 007a 194B     		ldr	r3, .L4+24
 161 007c 1C4A     		ldr	r2, .L4+40
 162 007e 1A62     		str	r2, [r3, #32]
  73:src/usermemory.c **** 	memunit[1].SetMem = SetRtc;
 163              		.loc 1 73 20
 164 0080 174B     		ldr	r3, .L4+24
 165 0082 1C4A     		ldr	r2, .L4+44
 166 0084 5A62     		str	r2, [r3, #36]
  74:src/usermemory.c **** 
  75:src/usermemory.c **** 	memunit[2].startaddr = 0x2000;
 167              		.loc 1 75 23
 168 0086 164B     		ldr	r3, .L4+24
 169 0088 4FF40052 		mov	r2, #8192
 170 008c 9A62     		str	r2, [r3, #40]
  76:src/usermemory.c **** 	memunit[2].endaddr = 0x3677;
 171              		.loc 1 76 21
 172 008e 144B     		ldr	r3, .L4+24
 173 0090 43F27762 		movw	r2, #13943
 174 0094 DA62     		str	r2, [r3, #44]
  77:src/usermemory.c **** 	memunit[2].GetMem = GetEeprom;
 175              		.loc 1 77 20
 176 0096 124B     		ldr	r3, .L4+24
 177 0098 174A     		ldr	r2, .L4+48
 178 009a 5A63     		str	r2, [r3, #52]
  78:src/usermemory.c **** 	memunit[2].SetMem = SetEeprom;
 179              		.loc 1 78 20
 180 009c 104B     		ldr	r3, .L4+24
 181 009e 174A     		ldr	r2, .L4+52
 182 00a0 9A63     		str	r2, [r3, #56]
  79:src/usermemory.c **** 
  80:src/usermemory.c **** 	memunit[3].startaddr = 0x8000;
 183              		.loc 1 80 23
 184 00a2 0F4B     		ldr	r3, .L4+24
 185 00a4 4FF40042 		mov	r2, #32768
 186 00a8 DA63     		str	r2, [r3, #60]
  81:src/usermemory.c **** 	memunit[3].endaddr = 0x10000;
 187              		.loc 1 81 21
 188 00aa 0D4B     		ldr	r3, .L4+24
 189 00ac 4FF48032 		mov	r2, #65536
 190 00b0 1A64     		str	r2, [r3, #64]
  82:src/usermemory.c **** 	memunit[3].GetMem = GetFlash;
 191              		.loc 1 82 20
 192 00b2 0B4B     		ldr	r3, .L4+24
 193 00b4 124A     		ldr	r2, .L4+56
 194 00b6 9A64     		str	r2, [r3, #72]
  83:src/usermemory.c **** 	memunit[3].SetMem = SetFlash;
 195              		.loc 1 83 20
 196 00b8 094B     		ldr	r3, .L4+24
 197 00ba 124A     		ldr	r2, .L4+60
 198 00bc DA64     		str	r2, [r3, #76]
  84:src/usermemory.c **** 
  85:src/usermemory.c **** }
 199              		.loc 1 85 1
 200 00be 00BF     		nop
 201 00c0 0837     		adds	r7, r7, #8
 202              	.LCFI3:
 203              		.cfi_def_cfa_offset 8
 204 00c2 BD46     		mov	sp, r7
 205              	.LCFI4:
 206              		.cfi_def_cfa_register 13
 207              		@ sp needed
 208 00c4 80BD     		pop	{r7, pc}
 209              	.L5:
 210 00c6 00BF     		.align	2
 211              	.L4:
 212 00c8 00B00208 		.word	134393856
 213 00cc 00000000 		.word	I2C_Configuration
 214 00d0 00000000 		.word	FLASH_Unlock
 215 00d4 00000000 		.word	FLASH_SetLatency
 216 00d8 00000000 		.word	MemManInit
 217 00dc 00000000 		.word	RAM
 218 00e0 00000000 		.word	memunit
 219 00e4 00000000 		.word	GetRam
 220 00e8 00000000 		.word	SetRam
 221 00ec 00000000 		.word	GetSignature
 222 00f0 00000000 		.word	GetRtc
 223 00f4 00000000 		.word	SetRtc
 224 00f8 00000000 		.word	GetEeprom
 225 00fc 00000000 		.word	SetEeprom
 226 0100 00000000 		.word	GetFlash
 227 0104 00000000 		.word	SetFlash
 228              		.cfi_endproc
 229              	.LFE27:
 231              		.section	.text.GetRam,"ax",%progbits
 232              		.align	1
 233              		.global	GetRam
 234              		.syntax unified
 235              		.thumb
 236              		.thumb_func
 238              	GetRam:
 239              	.LFB28:
  86:src/usermemory.c **** 
  87:src/usermemory.c **** //==============================================================================
  88:src/usermemory.c **** bool GetRam(uint16 addr, uint16 *pxDsn, uint16 len) {
 240              		.loc 1 88 53
 241              		.cfi_startproc
 242              		@ args = 0, pretend = 0, frame = 16
 243              		@ frame_needed = 1, uses_anonymous_args = 0
 244 0000 80B5     		push	{r7, lr}
 245              	.LCFI5:
 246              		.cfi_def_cfa_offset 8
 247              		.cfi_offset 7, -8
 248              		.cfi_offset 14, -4
 249 0002 84B0     		sub	sp, sp, #16
 250              	.LCFI6:
 251              		.cfi_def_cfa_offset 24
 252 0004 00AF     		add	r7, sp, #0
 253              	.LCFI7:
 254              		.cfi_def_cfa_register 7
 255 0006 0346     		mov	r3, r0
 256 0008 3960     		str	r1, [r7]
 257 000a FB80     		strh	r3, [r7, #6]	@ movhi
 258 000c 1346     		mov	r3, r2	@ movhi
 259 000e BB80     		strh	r3, [r7, #4]	@ movhi
  89:src/usermemory.c **** 	FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
 260              		.loc 1 89 12
 261 0010 0B4B     		ldr	r3, .L8
 262 0012 FB60     		str	r3, [r7, #12]
  90:src/usermemory.c **** 	atcResetCounter();
 263              		.loc 1 90 2
 264 0014 0B4B     		ldr	r3, .L8+4
 265 0016 9847     		blx	r3
 266              	.LVL4:
  91:src/usermemory.c **** 	CountReset = 0;
 267              		.loc 1 91 13
 268 0018 0B4B     		ldr	r3, .L8+8
 269 001a 0022     		movs	r2, #0
 270 001c 1A80     		strh	r2, [r3]	@ movhi
  92:src/usermemory.c **** 	CopyDataBytes((uint8*) &RAM.dwords[addr], (uint8*) pxDsn, len * 2);
 271              		.loc 1 92 36
 272 001e FB88     		ldrh	r3, [r7, #6]
 273              		.loc 1 92 25
 274 0020 5B00     		lsls	r3, r3, #1
 275 0022 0A4A     		ldr	r2, .L8+12
 276 0024 9818     		adds	r0, r3, r2
 277              		.loc 1 92 2
 278 0026 BB88     		ldrh	r3, [r7, #4]	@ movhi
 279 0028 5B00     		lsls	r3, r3, #1
 280 002a 9BB2     		uxth	r3, r3
 281 002c 1A46     		mov	r2, r3
 282 002e 3968     		ldr	r1, [r7]
 283 0030 074B     		ldr	r3, .L8+16
 284 0032 9847     		blx	r3
 285              	.LVL5:
  93:src/usermemory.c **** 	return true;
 286              		.loc 1 93 9
 287 0034 0123     		movs	r3, #1
  94:src/usermemory.c **** }
 288              		.loc 1 94 1
 289 0036 1846     		mov	r0, r3
 290 0038 1037     		adds	r7, r7, #16
 291              	.LCFI8:
 292              		.cfi_def_cfa_offset 8
 293 003a BD46     		mov	sp, r7
 294              	.LCFI9:
 295              		.cfi_def_cfa_register 13
 296              		@ sp needed
 297 003c 80BD     		pop	{r7, pc}
 298              	.L9:
 299 003e 00BF     		.align	2
 300              	.L8:
 301 0040 00B00208 		.word	134393856
 302 0044 00000000 		.word	atcResetCounter
 303 0048 00000000 		.word	CountReset
 304 004c 00000000 		.word	RAM
 305 0050 00000000 		.word	CopyDataBytes
 306              		.cfi_endproc
 307              	.LFE28:
 309              		.section	.text.SetRam,"ax",%progbits
 310              		.align	1
 311              		.global	SetRam
 312              		.syntax unified
 313              		.thumb
 314              		.thumb_func
 316              	SetRam:
 317              	.LFB29:
  95:src/usermemory.c **** //==============================================================================
  96:src/usermemory.c **** bool SetRam(uint16 addr, uint16 *pxSrc, uint16 len) {
 318              		.loc 1 96 53
 319              		.cfi_startproc
 320              		@ args = 0, pretend = 0, frame = 16
 321              		@ frame_needed = 1, uses_anonymous_args = 0
 322 0000 80B5     		push	{r7, lr}
 323              	.LCFI10:
 324              		.cfi_def_cfa_offset 8
 325              		.cfi_offset 7, -8
 326              		.cfi_offset 14, -4
 327 0002 84B0     		sub	sp, sp, #16
 328              	.LCFI11:
 329              		.cfi_def_cfa_offset 24
 330 0004 00AF     		add	r7, sp, #0
 331              	.LCFI12:
 332              		.cfi_def_cfa_register 7
 333 0006 0346     		mov	r3, r0
 334 0008 3960     		str	r1, [r7]
 335 000a FB80     		strh	r3, [r7, #6]	@ movhi
 336 000c 1346     		mov	r3, r2	@ movhi
 337 000e BB80     		strh	r3, [r7, #4]	@ movhi
  97:src/usermemory.c **** 	FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
 338              		.loc 1 97 12
 339 0010 0B4B     		ldr	r3, .L12
 340 0012 FB60     		str	r3, [r7, #12]
  98:src/usermemory.c **** 	atcResetCounter();
 341              		.loc 1 98 2
 342 0014 0B4B     		ldr	r3, .L12+4
 343 0016 9847     		blx	r3
 344              	.LVL6:
  99:src/usermemory.c **** 	CountReset = 0;
 345              		.loc 1 99 13
 346 0018 0B4B     		ldr	r3, .L12+8
 347 001a 0022     		movs	r2, #0
 348 001c 1A80     		strh	r2, [r3]	@ movhi
 100:src/usermemory.c **** 	CopyDataBytes((uint8*) pxSrc, (uint8*) &RAM.dwords[addr], len * 2);
 349              		.loc 1 100 52
 350 001e FB88     		ldrh	r3, [r7, #6]
 351              		.loc 1 100 41
 352 0020 5B00     		lsls	r3, r3, #1
 353 0022 0A4A     		ldr	r2, .L12+12
 354 0024 9918     		adds	r1, r3, r2
 355              		.loc 1 100 2
 356 0026 BB88     		ldrh	r3, [r7, #4]	@ movhi
 357 0028 5B00     		lsls	r3, r3, #1
 358 002a 9BB2     		uxth	r3, r3
 359 002c 1A46     		mov	r2, r3
 360 002e 3868     		ldr	r0, [r7]
 361 0030 074B     		ldr	r3, .L12+16
 362 0032 9847     		blx	r3
 363              	.LVL7:
 101:src/usermemory.c **** 	return true;
 364              		.loc 1 101 9
 365 0034 0123     		movs	r3, #1
 102:src/usermemory.c **** }
 366              		.loc 1 102 1
 367 0036 1846     		mov	r0, r3
 368 0038 1037     		adds	r7, r7, #16
 369              	.LCFI13:
 370              		.cfi_def_cfa_offset 8
 371 003a BD46     		mov	sp, r7
 372              	.LCFI14:
 373              		.cfi_def_cfa_register 13
 374              		@ sp needed
 375 003c 80BD     		pop	{r7, pc}
 376              	.L13:
 377 003e 00BF     		.align	2
 378              	.L12:
 379 0040 00B00208 		.word	134393856
 380 0044 00000000 		.word	atcResetCounter
 381 0048 00000000 		.word	CountReset
 382 004c 00000000 		.word	RAM
 383 0050 00000000 		.word	CopyDataBytes
 384              		.cfi_endproc
 385              	.LFE29:
 387              		.section	.rodata
 388              		.align	2
 389              	.LC0:
 390 0000 52554E4F 		.ascii	"RUNO UC20       \000"
 390      20554332 
 390      30202020 
 390      20202020 
 390      00
 391 0011 000000   		.align	2
 392              	.LC1:
 393 0014 52554E4F 		.ascii	"RUNO M66        \000"
 393      204D3636 
 393      20202020 
 393      20202020 
 393      00
 394 0025 000000   		.align	2
 395              	.LC2:
 396 0028 52554E4F 		.ascii	"RUNO UC15       \000"
 396      20554331 
 396      35202020 
 396      20202020 
 396      00
 397 0039 000000   		.align	2
 398              	.LC3:
 399 003c 52554E4F 		.ascii	"RUNO N715       \000"
 399      204E3731 
 399      35202020 
 399      20202020 
 399      00
 400 004d 000000   		.align	2
 401              	.LC4:
 402 0050 52554E4F 		.ascii	"RUNO           \000"
 402      20202020 
 402      20202020 
 402      20202000 
 403              		.align	2
 404              	.LC5:
 405 0060 31382F30 		.ascii	"18/09/2024\000"
 405      392F3230 
 405      323400
 406              		.section	.text.GetSignature,"ax",%progbits
 407              		.align	1
 408              		.global	GetSignature
 409              		.syntax unified
 410              		.thumb
 411              		.thumb_func
 413              	GetSignature:
 414              	.LFB30:
 103:src/usermemory.c **** //==============================================================================
 104:src/usermemory.c **** bool GetSignature(uint16 addr, uint16 *pxDsn, uint16 len) {
 415              		.loc 1 104 59
 416              		.cfi_startproc
 417              		@ args = 0, pretend = 0, frame = 88
 418              		@ frame_needed = 1, uses_anonymous_args = 0
 419 0000 90B5     		push	{r4, r7, lr}
 420              	.LCFI15:
 421              		.cfi_def_cfa_offset 12
 422              		.cfi_offset 4, -12
 423              		.cfi_offset 7, -8
 424              		.cfi_offset 14, -4
 425 0002 97B0     		sub	sp, sp, #92
 426              	.LCFI16:
 427              		.cfi_def_cfa_offset 104
 428 0004 00AF     		add	r7, sp, #0
 429              	.LCFI17:
 430              		.cfi_def_cfa_register 7
 431 0006 0346     		mov	r3, r0
 432 0008 3960     		str	r1, [r7]
 433 000a FB80     		strh	r3, [r7, #6]	@ movhi
 434 000c 1346     		mov	r3, r2	@ movhi
 435 000e BB80     		strh	r3, [r7, #4]	@ movhi
 105:src/usermemory.c **** 	FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
 436              		.loc 1 105 12
 437 0010 2D4B     		ldr	r3, .L21
 438 0012 3B65     		str	r3, [r7, #80]
 106:src/usermemory.c **** 	char bufferSign[64];
 107:src/usermemory.c **** 	char *DeviceName;
 108:src/usermemory.c **** 	//setDeviceName
 109:src/usermemory.c **** 	if (DeviceID == 1) {
 439              		.loc 1 109 15
 440 0014 2D4B     		ldr	r3, .L21+4
 441 0016 1B68     		ldr	r3, [r3]
 442              		.loc 1 109 5
 443 0018 012B     		cmp	r3, #1
 444 001a 02D1     		bne	.L15
 110:src/usermemory.c **** 		DeviceName = "RUNO UC20       ";
 445              		.loc 1 110 14
 446 001c 2C4B     		ldr	r3, .L21+8
 447 001e 7B65     		str	r3, [r7, #84]
 448 0020 16E0     		b	.L16
 449              	.L15:
 111:src/usermemory.c **** 	} else if (DeviceID == 2) {
 450              		.loc 1 111 22
 451 0022 2A4B     		ldr	r3, .L21+4
 452 0024 1B68     		ldr	r3, [r3]
 453              		.loc 1 111 12
 454 0026 022B     		cmp	r3, #2
 455 0028 02D1     		bne	.L17
 112:src/usermemory.c **** 		DeviceName = "RUNO M66        ";
 456              		.loc 1 112 14
 457 002a 2A4B     		ldr	r3, .L21+12
 458 002c 7B65     		str	r3, [r7, #84]
 459 002e 0FE0     		b	.L16
 460              	.L17:
 113:src/usermemory.c **** 	} else if (DeviceID == 3) {
 461              		.loc 1 113 22
 462 0030 264B     		ldr	r3, .L21+4
 463 0032 1B68     		ldr	r3, [r3]
 464              		.loc 1 113 12
 465 0034 032B     		cmp	r3, #3
 466 0036 02D1     		bne	.L18
 114:src/usermemory.c **** 		DeviceName = "RUNO UC15       ";
 467              		.loc 1 114 14
 468 0038 274B     		ldr	r3, .L21+16
 469 003a 7B65     		str	r3, [r7, #84]
 470 003c 08E0     		b	.L16
 471              	.L18:
 115:src/usermemory.c **** 	} else if (DeviceID == 4) {
 472              		.loc 1 115 22
 473 003e 234B     		ldr	r3, .L21+4
 474 0040 1B68     		ldr	r3, [r3]
 475              		.loc 1 115 12
 476 0042 042B     		cmp	r3, #4
 477 0044 02D1     		bne	.L19
 116:src/usermemory.c **** 		DeviceName = "RUNO N715       ";
 478              		.loc 1 116 14
 479 0046 254B     		ldr	r3, .L21+20
 480 0048 7B65     		str	r3, [r7, #84]
 481 004a 01E0     		b	.L16
 482              	.L19:
 117:src/usermemory.c **** 	} else {
 118:src/usermemory.c **** 		DeviceName = "RUNO           ";
 483              		.loc 1 118 14
 484 004c 244B     		ldr	r3, .L21+24
 485 004e 7B65     		str	r3, [r7, #84]
 486              	.L16:
 119:src/usermemory.c **** 	}
 120:src/usermemory.c **** 	uint8 version[4] = { 0, 17, 6, 8 };/*под новый процессор GD32F103 12 версия мигание светодиода*/
 487              		.loc 1 120 8
 488 0050 244B     		ldr	r3, .L21+28
 489 0052 BB60     		str	r3, [r7, #8]
 121:src/usermemory.c **** 	char *DateVersion = "18/09/2024"; // ошибки часов нет
 490              		.loc 1 121 8
 491 0054 244B     		ldr	r3, .L21+32
 492 0056 FB64     		str	r3, [r7, #76]
 122:src/usermemory.c **** 	CopyDataBytes((uint8*) DeviceName, (uint8*) bufferSign,
 123:src/usermemory.c **** 			strlen(DeviceName) + 1);
 493              		.loc 1 123 4
 494 0058 786D     		ldr	r0, [r7, #84]
 495 005a 244B     		ldr	r3, .L21+36
 496 005c 9847     		blx	r3
 497              	.LVL8:
 498 005e 0346     		mov	r3, r0
 122:src/usermemory.c **** 	CopyDataBytes((uint8*) DeviceName, (uint8*) bufferSign,
 499              		.loc 1 122 2
 500 0060 9BB2     		uxth	r3, r3
 501 0062 0133     		adds	r3, r3, #1
 502 0064 9AB2     		uxth	r2, r3
 503 0066 07F10C03 		add	r3, r7, #12
 504 006a 1946     		mov	r1, r3
 505 006c 786D     		ldr	r0, [r7, #84]
 506 006e 204B     		ldr	r3, .L21+40
 507 0070 9847     		blx	r3
 508              	.LVL9:
 124:src/usermemory.c **** 	CopyDataBytes((uint8*) version, (uint8*) bufferSign + 0x10, 4);
 509              		.loc 1 124 2
 510 0072 07F10C03 		add	r3, r7, #12
 511 0076 1033     		adds	r3, r3, #16
 512 0078 07F10800 		add	r0, r7, #8
 513 007c 0422     		movs	r2, #4
 514 007e 1946     		mov	r1, r3
 515 0080 1B4B     		ldr	r3, .L21+40
 516 0082 9847     		blx	r3
 517              	.LVL10:
 125:src/usermemory.c **** 	CopyDataBytes((uint8*) DateVersion, (uint8*) bufferSign + 0x20,
 518              		.loc 1 125 2
 519 0084 07F10C04 		add	r4, r7, #12
 520 0088 2034     		adds	r4, r4, #32
 126:src/usermemory.c **** 			strlen(DateVersion) + 1);
 521              		.loc 1 126 4
 522 008a F86C     		ldr	r0, [r7, #76]
 523 008c 174B     		ldr	r3, .L21+36
 524 008e 9847     		blx	r3
 525              	.LVL11:
 526 0090 0346     		mov	r3, r0
 125:src/usermemory.c **** 	CopyDataBytes((uint8*) DateVersion, (uint8*) bufferSign + 0x20,
 527              		.loc 1 125 2
 528 0092 9BB2     		uxth	r3, r3
 529 0094 0133     		adds	r3, r3, #1
 530 0096 9BB2     		uxth	r3, r3
 531 0098 1A46     		mov	r2, r3
 532 009a 2146     		mov	r1, r4
 533 009c F86C     		ldr	r0, [r7, #76]
 534 009e 144B     		ldr	r3, .L21+40
 535 00a0 9847     		blx	r3
 536              	.LVL12:
 127:src/usermemory.c **** 	CopyDataBytes((uint8*) bufferSign + addr * 2, (uint8*) pxDsn, len * 2);
 537              		.loc 1 127 43
 538 00a2 FB88     		ldrh	r3, [r7, #6]
 539 00a4 5B00     		lsls	r3, r3, #1
 540 00a6 1A46     		mov	r2, r3
 541              		.loc 1 127 2
 542 00a8 07F10C03 		add	r3, r7, #12
 543 00ac 9818     		adds	r0, r3, r2
 544 00ae BB88     		ldrh	r3, [r7, #4]	@ movhi
 545 00b0 5B00     		lsls	r3, r3, #1
 546 00b2 9BB2     		uxth	r3, r3
 547 00b4 1A46     		mov	r2, r3
 548 00b6 3968     		ldr	r1, [r7]
 549 00b8 0D4B     		ldr	r3, .L21+40
 550 00ba 9847     		blx	r3
 551              	.LVL13:
 128:src/usermemory.c **** 	return true;
 552              		.loc 1 128 9
 553 00bc 0123     		movs	r3, #1
 129:src/usermemory.c **** 
 130:src/usermemory.c **** }
 554              		.loc 1 130 1
 555 00be 1846     		mov	r0, r3
 556 00c0 5C37     		adds	r7, r7, #92
 557              	.LCFI18:
 558              		.cfi_def_cfa_offset 12
 559 00c2 BD46     		mov	sp, r7
 560              	.LCFI19:
 561              		.cfi_def_cfa_register 13
 562              		@ sp needed
 563 00c4 90BD     		pop	{r4, r7, pc}
 564              	.L22:
 565 00c6 00BF     		.align	2
 566              	.L21:
 567 00c8 00B00208 		.word	134393856
 568 00cc 00000000 		.word	DeviceID
 569 00d0 00000000 		.word	.LC0
 570 00d4 14000000 		.word	.LC1
 571 00d8 28000000 		.word	.LC2
 572 00dc 3C000000 		.word	.LC3
 573 00e0 50000000 		.word	.LC4
 574 00e4 00110608 		.word	134615296
 575 00e8 60000000 		.word	.LC5
 576 00ec 00000000 		.word	strlen
 577 00f0 00000000 		.word	CopyDataBytes
 578              		.cfi_endproc
 579              	.LFE30:
 581              		.section	.text.GetEeprom,"ax",%progbits
 582              		.align	1
 583              		.global	GetEeprom
 584              		.syntax unified
 585              		.thumb
 586              		.thumb_func
 588              	GetEeprom:
 589              	.LFB31:
 131:src/usermemory.c **** //==============================================================================
 132:src/usermemory.c **** bool GetEeprom(uint16 addr, uint16 *pxDsn, uint16 len) {
 590              		.loc 1 132 56
 591              		.cfi_startproc
 592              		@ args = 0, pretend = 0, frame = 272
 593              		@ frame_needed = 1, uses_anonymous_args = 0
 594 0000 80B5     		push	{r7, lr}
 595              	.LCFI20:
 596              		.cfi_def_cfa_offset 8
 597              		.cfi_offset 7, -8
 598              		.cfi_offset 14, -4
 599 0002 C4B0     		sub	sp, sp, #272
 600              	.LCFI21:
 601              		.cfi_def_cfa_offset 280
 602 0004 00AF     		add	r7, sp, #0
 603              	.LCFI22:
 604              		.cfi_def_cfa_register 7
 605 0006 07F58873 		add	r3, r7, #272
 606 000a A3F58873 		sub	r3, r3, #272
 607 000e 1960     		str	r1, [r3]
 608 0010 1146     		mov	r1, r2
 609 0012 07F58873 		add	r3, r7, #272
 610 0016 A3F58573 		sub	r3, r3, #266
 611 001a 0246     		mov	r2, r0	@ movhi
 612 001c 1A80     		strh	r2, [r3]	@ movhi
 613 001e 07F58873 		add	r3, r7, #272
 614 0022 A3F58673 		sub	r3, r3, #268
 615 0026 0A46     		mov	r2, r1	@ movhi
 616 0028 1A80     		strh	r2, [r3]	@ movhi
 133:src/usermemory.c **** 	FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
 617              		.loc 1 133 12
 618 002a 324B     		ldr	r3, .L30
 619 002c C7F80831 		str	r3, [r7, #264]
 134:src/usermemory.c **** 	uint8 charBuf[256];
 135:src/usermemory.c **** 	uint8 counter = 0;
 620              		.loc 1 135 8
 621 0030 0023     		movs	r3, #0
 622 0032 87F80F31 		strb	r3, [r7, #271]
 136:src/usermemory.c **** 
 137:src/usermemory.c **** 	uint8 curRead = 0;
 623              		.loc 1 137 8
 624 0036 0023     		movs	r3, #0
 625 0038 87F80E31 		strb	r3, [r7, #270]
 138:src/usermemory.c **** 	while (curRead < len) {
 626              		.loc 1 138 8
 627 003c 3AE0     		b	.L24
 628              	.L28:
 139:src/usermemory.c **** 		counter = 0;
 629              		.loc 1 139 11
 630 003e 0023     		movs	r3, #0
 631 0040 87F80F31 		strb	r3, [r7, #271]
 140:src/usermemory.c **** 		while (!I2C_EE_BufferRead(charBuf + curRead * 2, (addr + curRead) * 2,
 632              		.loc 1 140 9
 633 0044 08E0     		b	.L25
 634              	.L27:
 141:src/usermemory.c **** 				((len - curRead > 0x10) ? 0x10 : (len - curRead)) * 2)) {
 142:src/usermemory.c **** 			if (counter++ >= 10)
 635              		.loc 1 142 15
 636 0046 97F80F31 		ldrb	r3, [r7, #271]	@ zero_extendqisi2
 637 004a 5A1C     		adds	r2, r3, #1
 638 004c 87F80F21 		strb	r2, [r7, #271]
 639              		.loc 1 142 7
 640 0050 092B     		cmp	r3, #9
 641 0052 01D9     		bls	.L25
 143:src/usermemory.c **** 				return false;
 642              		.loc 1 143 12
 643 0054 0023     		movs	r3, #0
 644 0056 48E0     		b	.L29
 645              	.L25:
 140:src/usermemory.c **** 		while (!I2C_EE_BufferRead(charBuf + curRead * 2, (addr + curRead) * 2,
 646              		.loc 1 140 47
 647 0058 97F80E31 		ldrb	r3, [r7, #270]	@ zero_extendqisi2
 648 005c 5B00     		lsls	r3, r3, #1
 649 005e 1A46     		mov	r2, r3
 140:src/usermemory.c **** 		while (!I2C_EE_BufferRead(charBuf + curRead * 2, (addr + curRead) * 2,
 650              		.loc 1 140 11
 651 0060 07F10803 		add	r3, r7, #8
 652 0064 9818     		adds	r0, r3, r2
 140:src/usermemory.c **** 		while (!I2C_EE_BufferRead(charBuf + curRead * 2, (addr + curRead) * 2,
 653              		.loc 1 140 58
 654 0066 07F58873 		add	r3, r7, #272
 655 006a A3F58573 		sub	r3, r3, #266
 656 006e 1A88     		ldrh	r2, [r3]
 657 0070 97F80E31 		ldrb	r3, [r7, #270]	@ zero_extendqisi2
 658 0074 1344     		add	r3, r3, r2
 140:src/usermemory.c **** 		while (!I2C_EE_BufferRead(charBuf + curRead * 2, (addr + curRead) * 2,
 659              		.loc 1 140 11
 660 0076 9BB2     		uxth	r3, r3
 661 0078 5B00     		lsls	r3, r3, #1
 662 007a 99B2     		uxth	r1, r3
 141:src/usermemory.c **** 				((len - curRead > 0x10) ? 0x10 : (len - curRead)) * 2)) {
 663              		.loc 1 141 11
 664 007c 07F58873 		add	r3, r7, #272
 665 0080 A3F58673 		sub	r3, r3, #268
 666 0084 1A88     		ldrh	r2, [r3]
 667 0086 97F80E31 		ldrb	r3, [r7, #270]	@ zero_extendqisi2
 668 008a D31A     		subs	r3, r2, r3
 141:src/usermemory.c **** 				((len - curRead > 0x10) ? 0x10 : (len - curRead)) * 2)) {
 669              		.loc 1 141 36
 670 008c 102B     		cmp	r3, #16
 671 008e A8BF     		it	ge
 672 0090 1023     		movge	r3, #16
 140:src/usermemory.c **** 		while (!I2C_EE_BufferRead(charBuf + curRead * 2, (addr + curRead) * 2,
 673              		.loc 1 140 11
 674 0092 9BB2     		uxth	r3, r3
 675 0094 5B00     		lsls	r3, r3, #1
 676 0096 9BB2     		uxth	r3, r3
 677 0098 1A46     		mov	r2, r3
 678 009a 174B     		ldr	r3, .L30+4
 679 009c 9847     		blx	r3
 680              	.LVL14:
 681 009e 0346     		mov	r3, r0
 140:src/usermemory.c **** 		while (!I2C_EE_BufferRead(charBuf + curRead * 2, (addr + curRead) * 2,
 682              		.loc 1 140 10
 683 00a0 83F00103 		eor	r3, r3, #1
 684 00a4 DBB2     		uxtb	r3, r3
 140:src/usermemory.c **** 		while (!I2C_EE_BufferRead(charBuf + curRead * 2, (addr + curRead) * 2,
 685              		.loc 1 140 9
 686 00a6 002B     		cmp	r3, #0
 687 00a8 CDD1     		bne	.L27
 144:src/usermemory.c **** 		}
 145:src/usermemory.c **** 		curRead += 0x10;
 688              		.loc 1 145 11
 689 00aa 97F80E31 		ldrb	r3, [r7, #270]
 690 00ae 1033     		adds	r3, r3, #16
 691 00b0 87F80E31 		strb	r3, [r7, #270]
 692              	.L24:
 138:src/usermemory.c **** 		counter = 0;
 693              		.loc 1 138 17
 694 00b4 97F80E31 		ldrb	r3, [r7, #270]	@ zero_extendqisi2
 695 00b8 9BB2     		uxth	r3, r3
 138:src/usermemory.c **** 		counter = 0;
 696              		.loc 1 138 8
 697 00ba 07F58872 		add	r2, r7, #272
 698 00be A2F58672 		sub	r2, r2, #268
 699 00c2 1288     		ldrh	r2, [r2]
 700 00c4 9A42     		cmp	r2, r3
 701 00c6 BAD8     		bhi	.L28
 146:src/usermemory.c **** 	}
 147:src/usermemory.c **** 
 148:src/usermemory.c **** 	CopyDataBytes((uint8*) charBuf, (uint8*) pxDsn, len * 2);
 702              		.loc 1 148 2
 703 00c8 07F58873 		add	r3, r7, #272
 704 00cc A3F58673 		sub	r3, r3, #268
 705 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 706 00d2 5B00     		lsls	r3, r3, #1
 707 00d4 9AB2     		uxth	r2, r3
 708 00d6 07F58873 		add	r3, r7, #272
 709 00da A3F58873 		sub	r3, r3, #272
 710 00de 07F10800 		add	r0, r7, #8
 711 00e2 1968     		ldr	r1, [r3]
 712 00e4 054B     		ldr	r3, .L30+8
 713 00e6 9847     		blx	r3
 714              	.LVL15:
 149:src/usermemory.c **** 	return true;
 715              		.loc 1 149 9
 716 00e8 0123     		movs	r3, #1
 717              	.L29:
 150:src/usermemory.c **** }
 718              		.loc 1 150 1 discriminator 1
 719 00ea 1846     		mov	r0, r3
 720 00ec 07F58877 		add	r7, r7, #272
 721              	.LCFI23:
 722              		.cfi_def_cfa_offset 8
 723 00f0 BD46     		mov	sp, r7
 724              	.LCFI24:
 725              		.cfi_def_cfa_register 13
 726              		@ sp needed
 727 00f2 80BD     		pop	{r7, pc}
 728              	.L31:
 729              		.align	2
 730              	.L30:
 731 00f4 00B00208 		.word	134393856
 732 00f8 00000000 		.word	I2C_EE_BufferRead
 733 00fc 00000000 		.word	CopyDataBytes
 734              		.cfi_endproc
 735              	.LFE31:
 737              		.section	.text.SetEeprom,"ax",%progbits
 738              		.align	1
 739              		.global	SetEeprom
 740              		.syntax unified
 741              		.thumb
 742              		.thumb_func
 744              	SetEeprom:
 745              	.LFB32:
 151:src/usermemory.c **** //==============================================================================
 152:src/usermemory.c **** bool SetEeprom(uint16 addr, uint16 *pxSrc, uint16 len) {
 746              		.loc 1 152 56
 747              		.cfi_startproc
 748              		@ args = 0, pretend = 0, frame = 272
 749              		@ frame_needed = 1, uses_anonymous_args = 0
 750 0000 80B5     		push	{r7, lr}
 751              	.LCFI25:
 752              		.cfi_def_cfa_offset 8
 753              		.cfi_offset 7, -8
 754              		.cfi_offset 14, -4
 755 0002 C4B0     		sub	sp, sp, #272
 756              	.LCFI26:
 757              		.cfi_def_cfa_offset 280
 758 0004 00AF     		add	r7, sp, #0
 759              	.LCFI27:
 760              		.cfi_def_cfa_register 7
 761 0006 07F58873 		add	r3, r7, #272
 762 000a A3F58873 		sub	r3, r3, #272
 763 000e 1960     		str	r1, [r3]
 764 0010 1146     		mov	r1, r2
 765 0012 07F58873 		add	r3, r7, #272
 766 0016 A3F58573 		sub	r3, r3, #266
 767 001a 0246     		mov	r2, r0	@ movhi
 768 001c 1A80     		strh	r2, [r3]	@ movhi
 769 001e 07F58873 		add	r3, r7, #272
 770 0022 A3F58673 		sub	r3, r3, #268
 771 0026 0A46     		mov	r2, r1	@ movhi
 772 0028 1A80     		strh	r2, [r3]	@ movhi
 153:src/usermemory.c **** 	uint8 charBuf[256];
 154:src/usermemory.c **** 	uint8 counter = 0;
 773              		.loc 1 154 8
 774 002a 0023     		movs	r3, #0
 775 002c 87F80F31 		strb	r3, [r7, #271]
 155:src/usermemory.c **** 
 156:src/usermemory.c **** 	uint8 curRead = 0;
 776              		.loc 1 156 8
 777 0030 0023     		movs	r3, #0
 778 0032 87F80E31 		strb	r3, [r7, #270]
 157:src/usermemory.c **** 
 158:src/usermemory.c **** 	if ((pxSrc[0] == 0) && (addr == 0)) {
 779              		.loc 1 158 12
 780 0036 07F58873 		add	r3, r7, #272
 781 003a A3F58873 		sub	r3, r3, #272
 782 003e 1B68     		ldr	r3, [r3]
 783 0040 1B88     		ldrh	r3, [r3]
 784              		.loc 1 158 5
 785 0042 002B     		cmp	r3, #0
 786 0044 11D1     		bne	.L35
 787              		.loc 1 158 22 discriminator 1
 788 0046 07F58873 		add	r3, r7, #272
 789 004a A3F58573 		sub	r3, r3, #266
 790 004e 1B88     		ldrh	r3, [r3]
 791 0050 002B     		cmp	r3, #0
 792 0052 0AD1     		bne	.L35
 159:src/usermemory.c **** 		return false;
 793              		.loc 1 159 10
 794 0054 0023     		movs	r3, #0
 795 0056 7DE0     		b	.L41
 796              	.L36:
 797              	.LBB2:
 160:src/usermemory.c **** 	} else {
 161:src/usermemory.c **** 
 162:src/usermemory.c **** 		while (!I2C_EE_BufferWrite((uint8*) pxSrc, addr * 2, len * 2)) {
 163:src/usermemory.c **** 			if (counter++ >= 10)
 798              		.loc 1 163 15
 799 0058 97F80F31 		ldrb	r3, [r7, #271]	@ zero_extendqisi2
 800 005c 5A1C     		adds	r2, r3, #1
 801 005e 87F80F21 		strb	r2, [r7, #271]
 802              		.loc 1 163 7
 803 0062 092B     		cmp	r3, #9
 804 0064 01D9     		bls	.L35
 164:src/usermemory.c **** 				return false;
 805              		.loc 1 164 12
 806 0066 0023     		movs	r3, #0
 807 0068 74E0     		b	.L41
 808              	.L35:
 162:src/usermemory.c **** 			if (counter++ >= 10)
 809              		.loc 1 162 11
 810 006a 07F58873 		add	r3, r7, #272
 811 006e A3F58573 		sub	r3, r3, #266
 812 0072 1B88     		ldrh	r3, [r3]	@ movhi
 813 0074 5B00     		lsls	r3, r3, #1
 814 0076 99B2     		uxth	r1, r3
 815 0078 07F58873 		add	r3, r7, #272
 816 007c A3F58673 		sub	r3, r3, #268
 817 0080 1B88     		ldrh	r3, [r3]	@ movhi
 818 0082 5B00     		lsls	r3, r3, #1
 819 0084 9AB2     		uxth	r2, r3
 820 0086 07F58873 		add	r3, r7, #272
 821 008a A3F58873 		sub	r3, r3, #272
 822 008e 1868     		ldr	r0, [r3]
 823 0090 334B     		ldr	r3, .L42
 824 0092 9847     		blx	r3
 825              	.LVL16:
 826 0094 0346     		mov	r3, r0
 162:src/usermemory.c **** 			if (counter++ >= 10)
 827              		.loc 1 162 10
 828 0096 83F00103 		eor	r3, r3, #1
 829 009a DBB2     		uxtb	r3, r3
 162:src/usermemory.c **** 			if (counter++ >= 10)
 830              		.loc 1 162 9
 831 009c 002B     		cmp	r3, #0
 832 009e DBD1     		bne	.L36
 165:src/usermemory.c **** 		}
 166:src/usermemory.c **** 		vTaskDelay(10);
 833              		.loc 1 166 3
 834 00a0 0A20     		movs	r0, #10
 835 00a2 304B     		ldr	r3, .L42+4
 836 00a4 9847     		blx	r3
 837              	.LVL17:
 167:src/usermemory.c **** 		while (curRead < len) {
 838              		.loc 1 167 9
 839 00a6 3AE0     		b	.L37
 840              	.L40:
 168:src/usermemory.c **** 			counter = 0;
 841              		.loc 1 168 12
 842 00a8 0023     		movs	r3, #0
 843 00aa 87F80F31 		strb	r3, [r7, #271]
 169:src/usermemory.c **** 			while (!I2C_EE_BufferRead(charBuf + curRead * 2,
 844              		.loc 1 169 10
 845 00ae 08E0     		b	.L38
 846              	.L39:
 170:src/usermemory.c **** 					(addr + curRead) * 2,
 171:src/usermemory.c **** 					((len - curRead > 0x10) ? 0x10 : (len - curRead)) * 2)) {
 172:src/usermemory.c **** 				if (counter++ >= 10)
 847              		.loc 1 172 16
 848 00b0 97F80F31 		ldrb	r3, [r7, #271]	@ zero_extendqisi2
 849 00b4 5A1C     		adds	r2, r3, #1
 850 00b6 87F80F21 		strb	r2, [r7, #271]
 851              		.loc 1 172 8
 852 00ba 092B     		cmp	r3, #9
 853 00bc 01D9     		bls	.L38
 173:src/usermemory.c **** 					return false;
 854              		.loc 1 173 13
 855 00be 0023     		movs	r3, #0
 856 00c0 48E0     		b	.L41
 857              	.L38:
 169:src/usermemory.c **** 			while (!I2C_EE_BufferRead(charBuf + curRead * 2,
 858              		.loc 1 169 48
 859 00c2 97F80E31 		ldrb	r3, [r7, #270]	@ zero_extendqisi2
 860 00c6 5B00     		lsls	r3, r3, #1
 861 00c8 1A46     		mov	r2, r3
 169:src/usermemory.c **** 			while (!I2C_EE_BufferRead(charBuf + curRead * 2,
 862              		.loc 1 169 12
 863 00ca 07F10C03 		add	r3, r7, #12
 864 00ce 9818     		adds	r0, r3, r2
 170:src/usermemory.c **** 					(addr + curRead) * 2,
 865              		.loc 1 170 12
 866 00d0 07F58873 		add	r3, r7, #272
 867 00d4 A3F58573 		sub	r3, r3, #266
 868 00d8 1A88     		ldrh	r2, [r3]
 869 00da 97F80E31 		ldrb	r3, [r7, #270]	@ zero_extendqisi2
 870 00de 1344     		add	r3, r3, r2
 169:src/usermemory.c **** 			while (!I2C_EE_BufferRead(charBuf + curRead * 2,
 871              		.loc 1 169 12
 872 00e0 9BB2     		uxth	r3, r3
 873 00e2 5B00     		lsls	r3, r3, #1
 874 00e4 99B2     		uxth	r1, r3
 171:src/usermemory.c **** 				if (counter++ >= 10)
 875              		.loc 1 171 12
 876 00e6 07F58873 		add	r3, r7, #272
 877 00ea A3F58673 		sub	r3, r3, #268
 878 00ee 1A88     		ldrh	r2, [r3]
 879 00f0 97F80E31 		ldrb	r3, [r7, #270]	@ zero_extendqisi2
 880 00f4 D31A     		subs	r3, r2, r3
 171:src/usermemory.c **** 				if (counter++ >= 10)
 881              		.loc 1 171 37
 882 00f6 102B     		cmp	r3, #16
 883 00f8 A8BF     		it	ge
 884 00fa 1023     		movge	r3, #16
 169:src/usermemory.c **** 					(addr + curRead) * 2,
 885              		.loc 1 169 12
 886 00fc 9BB2     		uxth	r3, r3
 887 00fe 5B00     		lsls	r3, r3, #1
 888 0100 9BB2     		uxth	r3, r3
 889 0102 1A46     		mov	r2, r3
 890 0104 184B     		ldr	r3, .L42+8
 891 0106 9847     		blx	r3
 892              	.LVL18:
 893 0108 0346     		mov	r3, r0
 169:src/usermemory.c **** 					(addr + curRead) * 2,
 894              		.loc 1 169 11
 895 010a 83F00103 		eor	r3, r3, #1
 896 010e DBB2     		uxtb	r3, r3
 169:src/usermemory.c **** 					(addr + curRead) * 2,
 897              		.loc 1 169 10
 898 0110 002B     		cmp	r3, #0
 899 0112 CDD1     		bne	.L39
 174:src/usermemory.c **** 			}
 175:src/usermemory.c **** 
 176:src/usermemory.c **** 			curRead += 0x10;
 900              		.loc 1 176 12
 901 0114 97F80E31 		ldrb	r3, [r7, #270]
 902 0118 1033     		adds	r3, r3, #16
 903 011a 87F80E31 		strb	r3, [r7, #270]
 904              	.L37:
 167:src/usermemory.c **** 			counter = 0;
 905              		.loc 1 167 18
 906 011e 97F80E31 		ldrb	r3, [r7, #270]	@ zero_extendqisi2
 907 0122 9BB2     		uxth	r3, r3
 167:src/usermemory.c **** 			counter = 0;
 908              		.loc 1 167 9
 909 0124 07F58872 		add	r2, r7, #272
 910 0128 A2F58672 		sub	r2, r2, #268
 911 012c 1288     		ldrh	r2, [r2]
 912 012e 9A42     		cmp	r2, r3
 913 0130 BAD8     		bhi	.L40
 177:src/usermemory.c **** 		}
 178:src/usermemory.c **** 		//vTaskDelay(10);
 179:src/usermemory.c **** 		return Buffercmp(charBuf, (uint8*) pxSrc, len * 2);
 914              		.loc 1 179 10
 915 0132 07F58873 		add	r3, r7, #272
 916 0136 A3F58673 		sub	r3, r3, #268
 917 013a 1B88     		ldrh	r3, [r3]	@ movhi
 918 013c 5B00     		lsls	r3, r3, #1
 919 013e 9AB2     		uxth	r2, r3
 920 0140 07F58873 		add	r3, r7, #272
 921 0144 A3F58873 		sub	r3, r3, #272
 922 0148 07F10C00 		add	r0, r7, #12
 923 014c 1968     		ldr	r1, [r3]
 924 014e 074B     		ldr	r3, .L42+12
 925 0150 9847     		blx	r3
 926              	.LVL19:
 927 0152 0346     		mov	r3, r0
 928              	.L41:
 929              	.LBE2:
 180:src/usermemory.c **** 	}
 181:src/usermemory.c **** }
 930              		.loc 1 181 1 discriminator 1
 931 0154 1846     		mov	r0, r3
 932 0156 07F58877 		add	r7, r7, #272
 933              	.LCFI28:
 934              		.cfi_def_cfa_offset 8
 935 015a BD46     		mov	sp, r7
 936              	.LCFI29:
 937              		.cfi_def_cfa_register 13
 938              		@ sp needed
 939 015c 80BD     		pop	{r7, pc}
 940              	.L43:
 941 015e 00BF     		.align	2
 942              	.L42:
 943 0160 00000000 		.word	I2C_EE_BufferWrite
 944 0164 00000000 		.word	vTaskDelay
 945 0168 00000000 		.word	I2C_EE_BufferRead
 946 016c 00000000 		.word	Buffercmp
 947              		.cfi_endproc
 948              	.LFE32:
 950              		.section	.text.GetRtc,"ax",%progbits
 951              		.align	1
 952              		.global	GetRtc
 953              		.syntax unified
 954              		.thumb
 955              		.thumb_func
 957              	GetRtc:
 958              	.LFB33:
 182:src/usermemory.c **** 
 183:src/usermemory.c **** //==============================================================================
 184:src/usermemory.c **** bool GetRtc(uint16 addr, uint16 *pxDsn, uint16 len) {
 959              		.loc 1 184 53
 960              		.cfi_startproc
 961              		@ args = 0, pretend = 0, frame = 56
 962              		@ frame_needed = 1, uses_anonymous_args = 0
 963 0000 80B5     		push	{r7, lr}
 964              	.LCFI30:
 965              		.cfi_def_cfa_offset 8
 966              		.cfi_offset 7, -8
 967              		.cfi_offset 14, -4
 968 0002 8EB0     		sub	sp, sp, #56
 969              	.LCFI31:
 970              		.cfi_def_cfa_offset 64
 971 0004 00AF     		add	r7, sp, #0
 972              	.LCFI32:
 973              		.cfi_def_cfa_register 7
 974 0006 0346     		mov	r3, r0
 975 0008 3960     		str	r1, [r7]
 976 000a FB80     		strh	r3, [r7, #6]	@ movhi
 977 000c 1346     		mov	r3, r2	@ movhi
 978 000e BB80     		strh	r3, [r7, #4]	@ movhi
 185:src/usermemory.c **** 	FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
 979              		.loc 1 185 12
 980 0010 704B     		ldr	r3, .L55
 981 0012 3B63     		str	r3, [r7, #48]
 186:src/usermemory.c **** 	DATATIME temprtc;
 187:src/usermemory.c **** 
 188:src/usermemory.c **** 	char iFixstr[16];
 189:src/usermemory.c **** 
 190:src/usermemory.c **** 	tmpPointer = addr;
 982              		.loc 1 190 13
 983 0014 FB88     		ldrh	r3, [r7, #6]
 984 0016 704A     		ldr	r2, .L55+4
 985 0018 1360     		str	r3, [r2]
 191:src/usermemory.c **** 	tmpLen = len;
 986              		.loc 1 191 9
 987 001a BB88     		ldrh	r3, [r7, #4]
 988 001c 6F4A     		ldr	r2, .L55+8
 989 001e 1360     		str	r3, [r2]
 192:src/usermemory.c **** 	int tmp = 0;
 990              		.loc 1 192 6
 991 0020 0023     		movs	r3, #0
 992 0022 FB62     		str	r3, [r7, #44]
 193:src/usermemory.c **** 	int wr = 0;
 993              		.loc 1 193 6
 994 0024 0023     		movs	r3, #0
 995 0026 7B63     		str	r3, [r7, #52]
 194:src/usermemory.c **** 
 195:src/usermemory.c **** 	if (tmpPointer >= 0 && tmpPointer < 0x08 && tmpLen > 0) {
 996              		.loc 1 195 17
 997 0028 6B4B     		ldr	r3, .L55+4
 998 002a 1B68     		ldr	r3, [r3]
 999              		.loc 1 195 5
 1000 002c 002B     		cmp	r3, #0
 1001 002e 3EDB     		blt	.L45
 1002              		.loc 1 195 36 discriminator 1
 1003 0030 694B     		ldr	r3, .L55+4
 1004 0032 1B68     		ldr	r3, [r3]
 1005              		.loc 1 195 22 discriminator 1
 1006 0034 072B     		cmp	r3, #7
 1007 0036 3ADC     		bgt	.L45
 1008              		.loc 1 195 53 discriminator 2
 1009 0038 684B     		ldr	r3, .L55+8
 1010 003a 1B68     		ldr	r3, [r3]
 1011              		.loc 1 195 43 discriminator 2
 1012 003c 002B     		cmp	r3, #0
 1013 003e 36DD     		ble	.L45
 196:src/usermemory.c **** 		rtcGetDataTime(&temprtc);
 1014              		.loc 1 196 3
 1015 0040 07F11C03 		add	r3, r7, #28
 1016 0044 1846     		mov	r0, r3
 1017 0046 664B     		ldr	r3, .L55+12
 1018 0048 9847     		blx	r3
 1019              	.LVL20:
 197:src/usermemory.c **** 		tmp = ((tmpPointer + tmpLen) > 8) ? ((8 - tmpPointer)) : (tmpLen);
 1020              		.loc 1 197 22
 1021 004a 634B     		ldr	r3, .L55+4
 1022 004c 1A68     		ldr	r2, [r3]
 1023 004e 634B     		ldr	r3, .L55+8
 1024 0050 1B68     		ldr	r3, [r3]
 1025 0052 1344     		add	r3, r3, r2
 1026              		.loc 1 197 58
 1027 0054 082B     		cmp	r3, #8
 1028 0056 04DD     		ble	.L46
 1029              		.loc 1 197 43 discriminator 1
 1030 0058 5F4B     		ldr	r3, .L55+4
 1031 005a 1B68     		ldr	r3, [r3]
 1032              		.loc 1 197 58 discriminator 1
 1033 005c C3F10803 		rsb	r3, r3, #8
 1034 0060 01E0     		b	.L47
 1035              	.L46:
 1036              		.loc 1 197 58 is_stmt 0 discriminator 2
 1037 0062 5E4B     		ldr	r3, .L55+8
 1038 0064 1B68     		ldr	r3, [r3]
 1039              	.L47:
 1040              		.loc 1 197 7 is_stmt 1 discriminator 4
 1041 0066 FB62     		str	r3, [r7, #44]
 198:src/usermemory.c **** 
 199:src/usermemory.c **** 		CopyDataBytes((uint8*) ((uint8*) (&temprtc) + tmpPointer * 2),
 1042              		.loc 1 199 60 discriminator 4
 1043 0068 5B4B     		ldr	r3, .L55+4
 1044 006a 1B68     		ldr	r3, [r3]
 1045 006c 5B00     		lsls	r3, r3, #1
 1046 006e 1A46     		mov	r2, r3
 1047              		.loc 1 199 3 discriminator 4
 1048 0070 07F11C03 		add	r3, r7, #28
 1049 0074 9818     		adds	r0, r3, r2
 200:src/usermemory.c **** 				(uint8*) (pxDsn) + wr * 2, tmp * 2);
 1050              		.loc 1 200 27 discriminator 4
 1051 0076 7B6B     		ldr	r3, [r7, #52]
 1052 0078 5B00     		lsls	r3, r3, #1
 1053 007a 1A46     		mov	r2, r3
 199:src/usermemory.c **** 				(uint8*) (pxDsn) + wr * 2, tmp * 2);
 1054              		.loc 1 199 3 discriminator 4
 1055 007c 3B68     		ldr	r3, [r7]
 1056 007e 9918     		adds	r1, r3, r2
 1057 0080 FB6A     		ldr	r3, [r7, #44]
 1058 0082 9BB2     		uxth	r3, r3
 1059 0084 5B00     		lsls	r3, r3, #1
 1060 0086 9BB2     		uxth	r3, r3
 1061 0088 1A46     		mov	r2, r3
 1062 008a 564B     		ldr	r3, .L55+16
 1063 008c 9847     		blx	r3
 1064              	.LVL21:
 201:src/usermemory.c **** 		tmpPointer += tmp;
 1065              		.loc 1 201 14 discriminator 4
 1066 008e 524B     		ldr	r3, .L55+4
 1067 0090 1A68     		ldr	r2, [r3]
 1068 0092 FB6A     		ldr	r3, [r7, #44]
 1069 0094 1344     		add	r3, r3, r2
 1070 0096 504A     		ldr	r2, .L55+4
 1071 0098 1360     		str	r3, [r2]
 202:src/usermemory.c **** 		wr += tmp;
 1072              		.loc 1 202 6 discriminator 4
 1073 009a 7A6B     		ldr	r2, [r7, #52]
 1074 009c FB6A     		ldr	r3, [r7, #44]
 1075 009e 1344     		add	r3, r3, r2
 1076 00a0 7B63     		str	r3, [r7, #52]
 203:src/usermemory.c **** 		tmpLen -= tmp;
 1077              		.loc 1 203 10 discriminator 4
 1078 00a2 4E4B     		ldr	r3, .L55+8
 1079 00a4 1A68     		ldr	r2, [r3]
 1080 00a6 FB6A     		ldr	r3, [r7, #44]
 1081 00a8 D31A     		subs	r3, r2, r3
 1082 00aa 4C4A     		ldr	r2, .L55+8
 1083 00ac 1360     		str	r3, [r2]
 1084              	.L45:
 204:src/usermemory.c **** 	}
 205:src/usermemory.c **** 	if (tmpPointer >= 0x08 && tmpPointer < 0x10 && tmpLen > 0) {
 1085              		.loc 1 205 17
 1086 00ae 4A4B     		ldr	r3, .L55+4
 1087 00b0 1B68     		ldr	r3, [r3]
 1088              		.loc 1 205 5
 1089 00b2 072B     		cmp	r3, #7
 1090 00b4 3FDD     		ble	.L48
 1091              		.loc 1 205 39 discriminator 1
 1092 00b6 484B     		ldr	r3, .L55+4
 1093 00b8 1B68     		ldr	r3, [r3]
 1094              		.loc 1 205 25 discriminator 1
 1095 00ba 0F2B     		cmp	r3, #15
 1096 00bc 3BDC     		bgt	.L48
 1097              		.loc 1 205 56 discriminator 2
 1098 00be 474B     		ldr	r3, .L55+8
 1099 00c0 1B68     		ldr	r3, [r3]
 1100              		.loc 1 205 46 discriminator 2
 1101 00c2 002B     		cmp	r3, #0
 1102 00c4 37DD     		ble	.L48
 206:src/usermemory.c **** 		rtcGetDataTime(&temprtc);
 1103              		.loc 1 206 3
 1104 00c6 07F11C03 		add	r3, r7, #28
 1105 00ca 1846     		mov	r0, r3
 1106 00cc 444B     		ldr	r3, .L55+12
 1107 00ce 9847     		blx	r3
 1108              	.LVL22:
 207:src/usermemory.c **** 		//rtcGetLocalDataTime(&temprtc);
 208:src/usermemory.c **** 		tmp = ((tmpPointer + tmpLen) > 0x10) ? ((0x10 - tmpPointer)) : (tmpLen);
 1109              		.loc 1 208 22
 1110 00d0 414B     		ldr	r3, .L55+4
 1111 00d2 1A68     		ldr	r2, [r3]
 1112 00d4 414B     		ldr	r3, .L55+8
 1113 00d6 1B68     		ldr	r3, [r3]
 1114 00d8 1344     		add	r3, r3, r2
 1115              		.loc 1 208 64
 1116 00da 102B     		cmp	r3, #16
 1117 00dc 04DD     		ble	.L49
 1118              		.loc 1 208 49 discriminator 1
 1119 00de 3E4B     		ldr	r3, .L55+4
 1120 00e0 1B68     		ldr	r3, [r3]
 1121              		.loc 1 208 64 discriminator 1
 1122 00e2 C3F11003 		rsb	r3, r3, #16
 1123 00e6 01E0     		b	.L50
 1124              	.L49:
 1125              		.loc 1 208 64 is_stmt 0 discriminator 2
 1126 00e8 3C4B     		ldr	r3, .L55+8
 1127 00ea 1B68     		ldr	r3, [r3]
 1128              	.L50:
 1129              		.loc 1 208 7 is_stmt 1 discriminator 4
 1130 00ec FB62     		str	r3, [r7, #44]
 209:src/usermemory.c **** 		CopyDataBytes((uint8*) ((uint8*) (&temprtc) + (tmpPointer - 0x08) * 2),
 1131              		.loc 1 209 61 discriminator 4
 1132 00ee 3A4B     		ldr	r3, .L55+4
 1133 00f0 1B68     		ldr	r3, [r3]
 1134 00f2 083B     		subs	r3, r3, #8
 1135              		.loc 1 209 69 discriminator 4
 1136 00f4 5B00     		lsls	r3, r3, #1
 1137 00f6 1A46     		mov	r2, r3
 1138              		.loc 1 209 3 discriminator 4
 1139 00f8 07F11C03 		add	r3, r7, #28
 1140 00fc 9818     		adds	r0, r3, r2
 210:src/usermemory.c **** 				(uint8*) (pxDsn) + wr * 2, tmp * 2);
 1141              		.loc 1 210 27 discriminator 4
 1142 00fe 7B6B     		ldr	r3, [r7, #52]
 1143 0100 5B00     		lsls	r3, r3, #1
 1144 0102 1A46     		mov	r2, r3
 209:src/usermemory.c **** 		CopyDataBytes((uint8*) ((uint8*) (&temprtc) + (tmpPointer - 0x08) * 2),
 1145              		.loc 1 209 3 discriminator 4
 1146 0104 3B68     		ldr	r3, [r7]
 1147 0106 9918     		adds	r1, r3, r2
 1148 0108 FB6A     		ldr	r3, [r7, #44]
 1149 010a 9BB2     		uxth	r3, r3
 1150 010c 5B00     		lsls	r3, r3, #1
 1151 010e 9BB2     		uxth	r3, r3
 1152 0110 1A46     		mov	r2, r3
 1153 0112 344B     		ldr	r3, .L55+16
 1154 0114 9847     		blx	r3
 1155              	.LVL23:
 211:src/usermemory.c **** 		tmpPointer += tmp;
 1156              		.loc 1 211 14 discriminator 4
 1157 0116 304B     		ldr	r3, .L55+4
 1158 0118 1A68     		ldr	r2, [r3]
 1159 011a FB6A     		ldr	r3, [r7, #44]
 1160 011c 1344     		add	r3, r3, r2
 1161 011e 2E4A     		ldr	r2, .L55+4
 1162 0120 1360     		str	r3, [r2]
 212:src/usermemory.c **** 		wr += tmp;
 1163              		.loc 1 212 6 discriminator 4
 1164 0122 7A6B     		ldr	r2, [r7, #52]
 1165 0124 FB6A     		ldr	r3, [r7, #44]
 1166 0126 1344     		add	r3, r3, r2
 1167 0128 7B63     		str	r3, [r7, #52]
 213:src/usermemory.c **** 		tmpLen -= tmp;
 1168              		.loc 1 213 10 discriminator 4
 1169 012a 2C4B     		ldr	r3, .L55+8
 1170 012c 1A68     		ldr	r2, [r3]
 1171 012e FB6A     		ldr	r3, [r7, #44]
 1172 0130 D31A     		subs	r3, r2, r3
 1173 0132 2A4A     		ldr	r2, .L55+8
 1174 0134 1360     		str	r3, [r2]
 1175              	.L48:
 214:src/usermemory.c **** 	}
 215:src/usermemory.c **** 	if (tmpPointer >= 0x20 && tmpPointer < 0x30 && tmpLen > 0) {
 1176              		.loc 1 215 17
 1177 0136 284B     		ldr	r3, .L55+4
 1178 0138 1B68     		ldr	r3, [r3]
 1179              		.loc 1 215 5
 1180 013a 1F2B     		cmp	r3, #31
 1181 013c 3FDD     		ble	.L51
 1182              		.loc 1 215 39 discriminator 1
 1183 013e 264B     		ldr	r3, .L55+4
 1184 0140 1B68     		ldr	r3, [r3]
 1185              		.loc 1 215 25 discriminator 1
 1186 0142 2F2B     		cmp	r3, #47
 1187 0144 3BDC     		bgt	.L51
 1188              		.loc 1 215 56 discriminator 2
 1189 0146 254B     		ldr	r3, .L55+8
 1190 0148 1B68     		ldr	r3, [r3]
 1191              		.loc 1 215 46 discriminator 2
 1192 014a 002B     		cmp	r3, #0
 1193 014c 37DD     		ble	.L51
 216:src/usermemory.c **** 		rtcGetiFixDateTime(iFixstr);
 1194              		.loc 1 216 3
 1195 014e 07F10C03 		add	r3, r7, #12
 1196 0152 1846     		mov	r0, r3
 1197 0154 244B     		ldr	r3, .L55+20
 1198 0156 9847     		blx	r3
 1199              	.LVL24:
 217:src/usermemory.c **** 		tmp = ((tmpPointer + tmpLen) > 0x30) ? ((0x30 - tmpPointer)) : (tmpLen);
 1200              		.loc 1 217 22
 1201 0158 1F4B     		ldr	r3, .L55+4
 1202 015a 1A68     		ldr	r2, [r3]
 1203 015c 1F4B     		ldr	r3, .L55+8
 1204 015e 1B68     		ldr	r3, [r3]
 1205 0160 1344     		add	r3, r3, r2
 1206              		.loc 1 217 64
 1207 0162 302B     		cmp	r3, #48
 1208 0164 04DD     		ble	.L52
 1209              		.loc 1 217 49 discriminator 1
 1210 0166 1C4B     		ldr	r3, .L55+4
 1211 0168 1B68     		ldr	r3, [r3]
 1212              		.loc 1 217 64 discriminator 1
 1213 016a C3F13003 		rsb	r3, r3, #48
 1214 016e 01E0     		b	.L53
 1215              	.L52:
 1216              		.loc 1 217 64 is_stmt 0 discriminator 2
 1217 0170 1A4B     		ldr	r3, .L55+8
 1218 0172 1B68     		ldr	r3, [r3]
 1219              	.L53:
 1220              		.loc 1 217 7 is_stmt 1 discriminator 4
 1221 0174 FB62     		str	r3, [r7, #44]
 218:src/usermemory.c **** 		CopyDataBytes((uint8*) ((uint8*) (&iFixstr) + (tmpPointer - 0x20) * 2),
 1222              		.loc 1 218 61 discriminator 4
 1223 0176 184B     		ldr	r3, .L55+4
 1224 0178 1B68     		ldr	r3, [r3]
 1225 017a 203B     		subs	r3, r3, #32
 1226              		.loc 1 218 69 discriminator 4
 1227 017c 5B00     		lsls	r3, r3, #1
 1228 017e 1A46     		mov	r2, r3
 1229              		.loc 1 218 3 discriminator 4
 1230 0180 07F10C03 		add	r3, r7, #12
 1231 0184 9818     		adds	r0, r3, r2
 219:src/usermemory.c **** 				(uint8*) (pxDsn) + wr * 2, tmp * 2);
 1232              		.loc 1 219 27 discriminator 4
 1233 0186 7B6B     		ldr	r3, [r7, #52]
 1234 0188 5B00     		lsls	r3, r3, #1
 1235 018a 1A46     		mov	r2, r3
 218:src/usermemory.c **** 		CopyDataBytes((uint8*) ((uint8*) (&iFixstr) + (tmpPointer - 0x20) * 2),
 1236              		.loc 1 218 3 discriminator 4
 1237 018c 3B68     		ldr	r3, [r7]
 1238 018e 9918     		adds	r1, r3, r2
 1239 0190 FB6A     		ldr	r3, [r7, #44]
 1240 0192 9BB2     		uxth	r3, r3
 1241 0194 5B00     		lsls	r3, r3, #1
 1242 0196 9BB2     		uxth	r3, r3
 1243 0198 1A46     		mov	r2, r3
 1244 019a 124B     		ldr	r3, .L55+16
 1245 019c 9847     		blx	r3
 1246              	.LVL25:
 220:src/usermemory.c **** 		tmpPointer += tmp;
 1247              		.loc 1 220 14 discriminator 4
 1248 019e 0E4B     		ldr	r3, .L55+4
 1249 01a0 1A68     		ldr	r2, [r3]
 1250 01a2 FB6A     		ldr	r3, [r7, #44]
 1251 01a4 1344     		add	r3, r3, r2
 1252 01a6 0C4A     		ldr	r2, .L55+4
 1253 01a8 1360     		str	r3, [r2]
 221:src/usermemory.c **** 		wr += tmp;
 1254              		.loc 1 221 6 discriminator 4
 1255 01aa 7A6B     		ldr	r2, [r7, #52]
 1256 01ac FB6A     		ldr	r3, [r7, #44]
 1257 01ae 1344     		add	r3, r3, r2
 1258 01b0 7B63     		str	r3, [r7, #52]
 222:src/usermemory.c **** 		tmpLen -= tmp;
 1259              		.loc 1 222 10 discriminator 4
 1260 01b2 0A4B     		ldr	r3, .L55+8
 1261 01b4 1A68     		ldr	r2, [r3]
 1262 01b6 FB6A     		ldr	r3, [r7, #44]
 1263 01b8 D31A     		subs	r3, r2, r3
 1264 01ba 084A     		ldr	r2, .L55+8
 1265 01bc 1360     		str	r3, [r2]
 1266              	.L51:
 223:src/usermemory.c **** 	}
 224:src/usermemory.c **** 
 225:src/usermemory.c **** 	atcResetCounter();
 1267              		.loc 1 225 2
 1268 01be 0B4B     		ldr	r3, .L55+24
 1269 01c0 9847     		blx	r3
 1270              	.LVL26:
 226:src/usermemory.c **** 	CountReset = 0;
 1271              		.loc 1 226 13
 1272 01c2 0B4B     		ldr	r3, .L55+28
 1273 01c4 0022     		movs	r2, #0
 1274 01c6 1A80     		strh	r2, [r3]	@ movhi
 227:src/usermemory.c **** 	return true;
 1275              		.loc 1 227 9
 1276 01c8 0123     		movs	r3, #1
 228:src/usermemory.c **** }
 1277              		.loc 1 228 1
 1278 01ca 1846     		mov	r0, r3
 1279 01cc 3837     		adds	r7, r7, #56
 1280              	.LCFI33:
 1281              		.cfi_def_cfa_offset 8
 1282 01ce BD46     		mov	sp, r7
 1283              	.LCFI34:
 1284              		.cfi_def_cfa_register 13
 1285              		@ sp needed
 1286 01d0 80BD     		pop	{r7, pc}
 1287              	.L56:
 1288 01d2 00BF     		.align	2
 1289              	.L55:
 1290 01d4 00B00208 		.word	134393856
 1291 01d8 00000000 		.word	tmpPointer
 1292 01dc 00000000 		.word	tmpLen
 1293 01e0 00000000 		.word	rtcGetDataTime
 1294 01e4 00000000 		.word	CopyDataBytes
 1295 01e8 00000000 		.word	rtcGetiFixDateTime
 1296 01ec 00000000 		.word	atcResetCounter
 1297 01f0 00000000 		.word	CountReset
 1298              		.cfi_endproc
 1299              	.LFE33:
 1301              		.section	.text.SetRtc,"ax",%progbits
 1302              		.align	1
 1303              		.global	SetRtc
 1304              		.syntax unified
 1305              		.thumb
 1306              		.thumb_func
 1308              	SetRtc:
 1309              	.LFB34:
 229:src/usermemory.c **** //==============================================================================
 230:src/usermemory.c **** bool SetRtc(uint16 addr, uint16 *pxSrc, uint16 len) {
 1310              		.loc 1 230 53
 1311              		.cfi_startproc
 1312              		@ args = 0, pretend = 0, frame = 48
 1313              		@ frame_needed = 1, uses_anonymous_args = 0
 1314 0000 80B5     		push	{r7, lr}
 1315              	.LCFI35:
 1316              		.cfi_def_cfa_offset 8
 1317              		.cfi_offset 7, -8
 1318              		.cfi_offset 14, -4
 1319 0002 8CB0     		sub	sp, sp, #48
 1320              	.LCFI36:
 1321              		.cfi_def_cfa_offset 56
 1322 0004 00AF     		add	r7, sp, #0
 1323              	.LCFI37:
 1324              		.cfi_def_cfa_register 7
 1325 0006 0346     		mov	r3, r0
 1326 0008 3960     		str	r1, [r7]
 1327 000a FB80     		strh	r3, [r7, #6]	@ movhi
 1328 000c 1346     		mov	r3, r2	@ movhi
 1329 000e BB80     		strh	r3, [r7, #4]	@ movhi
 231:src/usermemory.c **** 	FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
 1330              		.loc 1 231 12
 1331 0010 394B     		ldr	r3, .L66
 1332 0012 FB62     		str	r3, [r7, #44]
 232:src/usermemory.c **** 	DATATIME temprtc;
 233:src/usermemory.c **** 
 234:src/usermemory.c **** 	char iFixstr[16];
 235:src/usermemory.c **** 
 236:src/usermemory.c **** 	if (addr >= 0x20) {
 1333              		.loc 1 236 5
 1334 0014 FB88     		ldrh	r3, [r7, #6]
 1335 0016 1F2B     		cmp	r3, #31
 1336 0018 13D9     		bls	.L58
 237:src/usermemory.c **** 		rtcGetiFixDateTime(iFixstr);
 1337              		.loc 1 237 3
 1338 001a 07F10C03 		add	r3, r7, #12
 1339 001e 1846     		mov	r0, r3
 1340 0020 364B     		ldr	r3, .L66+4
 1341 0022 9847     		blx	r3
 1342              	.LVL27:
 238:src/usermemory.c **** 		CopyDataBytes((uint8*) pxSrc, (uint8*) iFixstr, len * 2);
 1343              		.loc 1 238 3
 1344 0024 BB88     		ldrh	r3, [r7, #4]	@ movhi
 1345 0026 5B00     		lsls	r3, r3, #1
 1346 0028 9AB2     		uxth	r2, r3
 1347 002a 07F10C03 		add	r3, r7, #12
 1348 002e 1946     		mov	r1, r3
 1349 0030 3868     		ldr	r0, [r7]
 1350 0032 334B     		ldr	r3, .L66+8
 1351 0034 9847     		blx	r3
 1352              	.LVL28:
 239:src/usermemory.c **** 		rtcSetiFixDateTime(iFixstr);
 1353              		.loc 1 239 3
 1354 0036 07F10C03 		add	r3, r7, #12
 1355 003a 1846     		mov	r0, r3
 1356 003c 314B     		ldr	r3, .L66+12
 1357 003e 9847     		blx	r3
 1358              	.LVL29:
 1359 0040 50E0     		b	.L59
 1360              	.L58:
 240:src/usermemory.c **** 	} else if (addr < 0x08) {
 1361              		.loc 1 240 12
 1362 0042 FB88     		ldrh	r3, [r7, #6]
 1363 0044 072B     		cmp	r3, #7
 1364 0046 23D8     		bhi	.L60
 241:src/usermemory.c **** 		rtcGetDataTime(&temprtc);
 1365              		.loc 1 241 3
 1366 0048 07F11C03 		add	r3, r7, #28
 1367 004c 1846     		mov	r0, r3
 1368 004e 2E4B     		ldr	r3, .L66+16
 1369 0050 9847     		blx	r3
 1370              	.LVL30:
 242:src/usermemory.c **** 		CopyDataBytes((uint8*) pxSrc, (uint8*) ((uint8*) (&temprtc) + addr * 2),
 1371              		.loc 1 242 70
 1372 0052 FB88     		ldrh	r3, [r7, #6]
 1373 0054 5B00     		lsls	r3, r3, #1
 1374 0056 1A46     		mov	r2, r3
 1375              		.loc 1 242 3
 1376 0058 07F11C03 		add	r3, r7, #28
 1377 005c 9918     		adds	r1, r3, r2
 243:src/usermemory.c **** 				((len + addr > 0x08) ? (8 - addr) : (len)) * 2);
 1378              		.loc 1 243 11
 1379 005e BA88     		ldrh	r2, [r7, #4]
 1380 0060 FB88     		ldrh	r3, [r7, #6]
 1381 0062 1344     		add	r3, r3, r2
 242:src/usermemory.c **** 		CopyDataBytes((uint8*) pxSrc, (uint8*) ((uint8*) (&temprtc) + addr * 2),
 1382              		.loc 1 242 3
 1383 0064 082B     		cmp	r3, #8
 1384 0066 06DD     		ble	.L61
 1385              		.loc 1 243 31 discriminator 1
 1386 0068 FB88     		ldrh	r3, [r7, #6]
 1387 006a C3F10803 		rsb	r3, r3, #8
 242:src/usermemory.c **** 		CopyDataBytes((uint8*) pxSrc, (uint8*) ((uint8*) (&temprtc) + addr * 2),
 1388              		.loc 1 242 3 discriminator 1
 1389 006e 9BB2     		uxth	r3, r3
 1390 0070 5B00     		lsls	r3, r3, #1
 1391 0072 9BB2     		uxth	r3, r3
 1392 0074 02E0     		b	.L62
 1393              	.L61:
 242:src/usermemory.c **** 		CopyDataBytes((uint8*) pxSrc, (uint8*) ((uint8*) (&temprtc) + addr * 2),
 1394              		.loc 1 242 3 is_stmt 0 discriminator 2
 1395 0076 BB88     		ldrh	r3, [r7, #4]	@ movhi
 1396 0078 5B00     		lsls	r3, r3, #1
 1397 007a 9BB2     		uxth	r3, r3
 1398              	.L62:
 242:src/usermemory.c **** 		CopyDataBytes((uint8*) pxSrc, (uint8*) ((uint8*) (&temprtc) + addr * 2),
 1399              		.loc 1 242 3 discriminator 4
 1400 007c 1A46     		mov	r2, r3
 1401 007e 3868     		ldr	r0, [r7]
 1402 0080 1F4B     		ldr	r3, .L66+8
 1403 0082 9847     		blx	r3
 1404              	.LVL31:
 244:src/usermemory.c **** 		rtcSetDataTime(&temprtc);
 1405              		.loc 1 244 3 is_stmt 1 discriminator 4
 1406 0084 07F11C03 		add	r3, r7, #28
 1407 0088 1846     		mov	r0, r3
 1408 008a 204B     		ldr	r3, .L66+20
 1409 008c 9847     		blx	r3
 1410              	.LVL32:
 1411 008e 29E0     		b	.L59
 1412              	.L60:
 245:src/usermemory.c **** 	} else if (addr >= 0x08 && addr < 0x10) {
 1413              		.loc 1 245 12
 1414 0090 FB88     		ldrh	r3, [r7, #6]
 1415 0092 072B     		cmp	r3, #7
 1416 0094 26D9     		bls	.L59
 1417              		.loc 1 245 26 discriminator 1
 1418 0096 FB88     		ldrh	r3, [r7, #6]
 1419 0098 0F2B     		cmp	r3, #15
 1420 009a 23D8     		bhi	.L59
 246:src/usermemory.c **** 		rtcGetDataTime(&temprtc);
 1421              		.loc 1 246 3
 1422 009c 07F11C03 		add	r3, r7, #28
 1423 00a0 1846     		mov	r0, r3
 1424 00a2 194B     		ldr	r3, .L66+16
 1425 00a4 9847     		blx	r3
 1426              	.LVL33:
 247:src/usermemory.c **** 		//rtcGetLocalDataTime(&temprtc);
 248:src/usermemory.c **** 		CopyDataBytes((uint8*) pxSrc,
 249:src/usermemory.c **** 				(uint8*) ((uint8*) (&temprtc) + (addr - 0x08) * 2),
 1427              		.loc 1 249 43
 1428 00a6 FB88     		ldrh	r3, [r7, #6]
 1429 00a8 083B     		subs	r3, r3, #8
 1430              		.loc 1 249 51
 1431 00aa 5B00     		lsls	r3, r3, #1
 1432 00ac 1A46     		mov	r2, r3
 248:src/usermemory.c **** 				(uint8*) ((uint8*) (&temprtc) + (addr - 0x08) * 2),
 1433              		.loc 1 248 3
 1434 00ae 07F11C03 		add	r3, r7, #28
 1435 00b2 9918     		adds	r1, r3, r2
 250:src/usermemory.c **** 				((len + addr > 0x10) ? (0x10 - addr) : (len)) * 2);
 1436              		.loc 1 250 11
 1437 00b4 BA88     		ldrh	r2, [r7, #4]
 1438 00b6 FB88     		ldrh	r3, [r7, #6]
 1439 00b8 1344     		add	r3, r3, r2
 248:src/usermemory.c **** 				(uint8*) ((uint8*) (&temprtc) + (addr - 0x08) * 2),
 1440              		.loc 1 248 3
 1441 00ba 102B     		cmp	r3, #16
 1442 00bc 06DD     		ble	.L63
 1443              		.loc 1 250 34 discriminator 1
 1444 00be FB88     		ldrh	r3, [r7, #6]
 1445 00c0 C3F11003 		rsb	r3, r3, #16
 248:src/usermemory.c **** 				(uint8*) ((uint8*) (&temprtc) + (addr - 0x08) * 2),
 1446              		.loc 1 248 3 discriminator 1
 1447 00c4 9BB2     		uxth	r3, r3
 1448 00c6 5B00     		lsls	r3, r3, #1
 1449 00c8 9BB2     		uxth	r3, r3
 1450 00ca 02E0     		b	.L64
 1451              	.L63:
 248:src/usermemory.c **** 				(uint8*) ((uint8*) (&temprtc) + (addr - 0x08) * 2),
 1452              		.loc 1 248 3 is_stmt 0 discriminator 2
 1453 00cc BB88     		ldrh	r3, [r7, #4]	@ movhi
 1454 00ce 5B00     		lsls	r3, r3, #1
 1455 00d0 9BB2     		uxth	r3, r3
 1456              	.L64:
 248:src/usermemory.c **** 				(uint8*) ((uint8*) (&temprtc) + (addr - 0x08) * 2),
 1457              		.loc 1 248 3 discriminator 4
 1458 00d2 1A46     		mov	r2, r3
 1459 00d4 3868     		ldr	r0, [r7]
 1460 00d6 0A4B     		ldr	r3, .L66+8
 1461 00d8 9847     		blx	r3
 1462              	.LVL34:
 251:src/usermemory.c **** 		rtcSetDataTime(&temprtc);
 1463              		.loc 1 251 3 is_stmt 1 discriminator 4
 1464 00da 07F11C03 		add	r3, r7, #28
 1465 00de 1846     		mov	r0, r3
 1466 00e0 0A4B     		ldr	r3, .L66+20
 1467 00e2 9847     		blx	r3
 1468              	.LVL35:
 1469              	.L59:
 252:src/usermemory.c **** 		//rtcSetLocalDataTime(&temprtc);
 253:src/usermemory.c **** 	}
 254:src/usermemory.c **** 
 255:src/usermemory.c **** 	atcResetCounter();
 1470              		.loc 1 255 2
 1471 00e4 0A4B     		ldr	r3, .L66+24
 1472 00e6 9847     		blx	r3
 1473              	.LVL36:
 256:src/usermemory.c **** 	CountReset = 0;
 1474              		.loc 1 256 13
 1475 00e8 0A4B     		ldr	r3, .L66+28
 1476 00ea 0022     		movs	r2, #0
 1477 00ec 1A80     		strh	r2, [r3]	@ movhi
 257:src/usermemory.c **** 	return true;
 1478              		.loc 1 257 9
 1479 00ee 0123     		movs	r3, #1
 258:src/usermemory.c **** }
 1480              		.loc 1 258 1
 1481 00f0 1846     		mov	r0, r3
 1482 00f2 3037     		adds	r7, r7, #48
 1483              	.LCFI38:
 1484              		.cfi_def_cfa_offset 8
 1485 00f4 BD46     		mov	sp, r7
 1486              	.LCFI39:
 1487              		.cfi_def_cfa_register 13
 1488              		@ sp needed
 1489 00f6 80BD     		pop	{r7, pc}
 1490              	.L67:
 1491              		.align	2
 1492              	.L66:
 1493 00f8 00B00208 		.word	134393856
 1494 00fc 00000000 		.word	rtcGetiFixDateTime
 1495 0100 00000000 		.word	CopyDataBytes
 1496 0104 00000000 		.word	rtcSetiFixDateTime
 1497 0108 00000000 		.word	rtcGetDataTime
 1498 010c 00000000 		.word	rtcSetDataTime
 1499 0110 00000000 		.word	atcResetCounter
 1500 0114 00000000 		.word	CountReset
 1501              		.cfi_endproc
 1502              	.LFE34:
 1504              		.section	.text.GetFlash,"ax",%progbits
 1505              		.align	1
 1506              		.global	GetFlash
 1507              		.syntax unified
 1508              		.thumb
 1509              		.thumb_func
 1511              	GetFlash:
 1512              	.LFB35:
 259:src/usermemory.c **** //==============================================================================
 260:src/usermemory.c **** 
 261:src/usermemory.c **** //==============================================================================
 262:src/usermemory.c **** bool GetFlash(uint16 addr, uint16 *pxDsn, uint16 len) {
 1513              		.loc 1 262 55
 1514              		.cfi_startproc
 1515              		@ args = 0, pretend = 0, frame = 16
 1516              		@ frame_needed = 1, uses_anonymous_args = 0
 1517 0000 80B5     		push	{r7, lr}
 1518              	.LCFI40:
 1519              		.cfi_def_cfa_offset 8
 1520              		.cfi_offset 7, -8
 1521              		.cfi_offset 14, -4
 1522 0002 84B0     		sub	sp, sp, #16
 1523              	.LCFI41:
 1524              		.cfi_def_cfa_offset 24
 1525 0004 00AF     		add	r7, sp, #0
 1526              	.LCFI42:
 1527              		.cfi_def_cfa_register 7
 1528 0006 0346     		mov	r3, r0
 1529 0008 3960     		str	r1, [r7]
 1530 000a FB80     		strh	r3, [r7, #6]	@ movhi
 1531 000c 1346     		mov	r3, r2	@ movhi
 1532 000e BB80     		strh	r3, [r7, #4]	@ movhi
 263:src/usermemory.c **** 	FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
 1533              		.loc 1 263 12
 1534 0010 0C4B     		ldr	r3, .L70
 1535 0012 FB60     		str	r3, [r7, #12]
 264:src/usermemory.c **** 	void *pxFlash = (void*) (DEVICE_FLASHMEM_LOCATION);
 1536              		.loc 1 264 8
 1537 0014 0B4B     		ldr	r3, .L70
 1538 0016 BB60     		str	r3, [r7, #8]
 265:src/usermemory.c **** 	//pxFlash = (void*) ((int) pxFlash + addr * 2);
 266:src/usermemory.c **** 	CopyDataBytes(((uint8*) pxFlash) + addr * 2, (uint8*) pxDsn, len * 2);
 1539              		.loc 1 266 42
 1540 0018 FB88     		ldrh	r3, [r7, #6]
 1541 001a 5B00     		lsls	r3, r3, #1
 1542 001c 1A46     		mov	r2, r3
 1543              		.loc 1 266 2
 1544 001e BB68     		ldr	r3, [r7, #8]
 1545 0020 9818     		adds	r0, r3, r2
 1546 0022 BB88     		ldrh	r3, [r7, #4]	@ movhi
 1547 0024 5B00     		lsls	r3, r3, #1
 1548 0026 9BB2     		uxth	r3, r3
 1549 0028 1A46     		mov	r2, r3
 1550 002a 3968     		ldr	r1, [r7]
 1551 002c 064B     		ldr	r3, .L70+4
 1552 002e 9847     		blx	r3
 1553              	.LVL37:
 267:src/usermemory.c **** 	atcResetCounter();
 1554              		.loc 1 267 2
 1555 0030 064B     		ldr	r3, .L70+8
 1556 0032 9847     		blx	r3
 1557              	.LVL38:
 268:src/usermemory.c **** 	CountReset = 0;
 1558              		.loc 1 268 13
 1559 0034 064B     		ldr	r3, .L70+12
 1560 0036 0022     		movs	r2, #0
 1561 0038 1A80     		strh	r2, [r3]	@ movhi
 269:src/usermemory.c **** 	return true;
 1562              		.loc 1 269 9
 1563 003a 0123     		movs	r3, #1
 270:src/usermemory.c **** }
 1564              		.loc 1 270 1
 1565 003c 1846     		mov	r0, r3
 1566 003e 1037     		adds	r7, r7, #16
 1567              	.LCFI43:
 1568              		.cfi_def_cfa_offset 8
 1569 0040 BD46     		mov	sp, r7
 1570              	.LCFI44:
 1571              		.cfi_def_cfa_register 13
 1572              		@ sp needed
 1573 0042 80BD     		pop	{r7, pc}
 1574              	.L71:
 1575              		.align	2
 1576              	.L70:
 1577 0044 00B00208 		.word	134393856
 1578 0048 00000000 		.word	CopyDataBytes
 1579 004c 00000000 		.word	atcResetCounter
 1580 0050 00000000 		.word	CountReset
 1581              		.cfi_endproc
 1582              	.LFE35:
 1584              		.section	.text.SetFlash,"ax",%progbits
 1585              		.align	1
 1586              		.global	SetFlash
 1587              		.syntax unified
 1588              		.thumb
 1589              		.thumb_func
 1591              	SetFlash:
 1592              	.LFB36:
 271:src/usermemory.c **** //==============================================================================
 272:src/usermemory.c **** bool SetFlash(uint16 addr, uint16 *pxSrc, uint16 len) {
 1593              		.loc 1 272 55
 1594              		.cfi_startproc
 1595              		@ args = 0, pretend = 0, frame = 24
 1596              		@ frame_needed = 1, uses_anonymous_args = 0
 1597 0000 80B5     		push	{r7, lr}
 1598              	.LCFI45:
 1599              		.cfi_def_cfa_offset 8
 1600              		.cfi_offset 7, -8
 1601              		.cfi_offset 14, -4
 1602 0002 86B0     		sub	sp, sp, #24
 1603              	.LCFI46:
 1604              		.cfi_def_cfa_offset 32
 1605 0004 00AF     		add	r7, sp, #0
 1606              	.LCFI47:
 1607              		.cfi_def_cfa_register 7
 1608 0006 0346     		mov	r3, r0
 1609 0008 3960     		str	r1, [r7]
 1610 000a FB80     		strh	r3, [r7, #6]	@ movhi
 1611 000c 1346     		mov	r3, r2	@ movhi
 1612 000e BB80     		strh	r3, [r7, #4]	@ movhi
 273:src/usermemory.c **** 
 274:src/usermemory.c **** 	FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
 1613              		.loc 1 274 12
 1614 0010 984B     		ldr	r3, .L89
 1615 0012 7B61     		str	r3, [r7, #20]
 275:src/usermemory.c **** 
 276:src/usermemory.c **** 	uint16 tempadr = addr;
 1616              		.loc 1 276 9
 1617 0014 FB88     		ldrh	r3, [r7, #6]	@ movhi
 1618 0016 7B82     		strh	r3, [r7, #18]	@ movhi
 277:src/usermemory.c **** 	uint16 page = addr / 0x400;
 1619              		.loc 1 277 9
 1620 0018 FB88     		ldrh	r3, [r7, #6]
 1621 001a 9B0A     		lsrs	r3, r3, #10
 1622 001c 3B82     		strh	r3, [r7, #16]	@ movhi
 278:src/usermemory.c **** 	uint16 pageEnd = (addr + len) / 0x400;
 1623              		.loc 1 278 25
 1624 001e FA88     		ldrh	r2, [r7, #6]
 1625 0020 BB88     		ldrh	r3, [r7, #4]
 1626 0022 1344     		add	r3, r3, r2
 1627              		.loc 1 278 32
 1628 0024 002B     		cmp	r3, #0
 1629 0026 01DA     		bge	.L73
 1630 0028 03F2FF33 		addw	r3, r3, #1023
 1631              	.L73:
 1632 002c 9B12     		asrs	r3, r3, #10
 1633              		.loc 1 278 9
 1634 002e FB81     		strh	r3, [r7, #14]	@ movhi
 279:src/usermemory.c **** 	uint16 pageOffset = addr % 0x400;
 1635              		.loc 1 279 9
 1636 0030 FB88     		ldrh	r3, [r7, #6]	@ movhi
 1637 0032 C3F30903 		ubfx	r3, r3, #0, #10
 1638 0036 BB81     		strh	r3, [r7, #12]	@ movhi
 280:src/usermemory.c **** 	uint16 pageEndOffset = (addr + len) % 0x400;
 1639              		.loc 1 280 38
 1640 0038 FA88     		ldrh	r2, [r7, #6]	@ movhi
 1641 003a BB88     		ldrh	r3, [r7, #4]	@ movhi
 1642 003c 1344     		add	r3, r3, r2
 1643 003e 9BB2     		uxth	r3, r3
 1644              		.loc 1 280 9
 1645 0040 C3F30903 		ubfx	r3, r3, #0, #10
 1646 0044 7B81     		strh	r3, [r7, #10]	@ movhi
 281:src/usermemory.c **** 	FLASH_Status status;
 282:src/usermemory.c **** 	//vTaskDelay(100);
 283:src/usermemory.c **** 	FLASH_Unlock();
 1647              		.loc 1 283 2
 1648 0046 8C4B     		ldr	r3, .L89+4
 1649 0048 9847     		blx	r3
 1650              	.LVL39:
 284:src/usermemory.c **** 	if (page != pageEnd) {
 1651              		.loc 1 284 5
 1652 004a 3A8A     		ldrh	r2, [r7, #16]
 1653 004c FB89     		ldrh	r3, [r7, #14]
 1654 004e 9A42     		cmp	r2, r3
 1655 0050 00F0AF80 		beq	.L74
 1656              	.LBB3:
 285:src/usermemory.c **** 
 286:src/usermemory.c **** 		//=================================first part
 287:src/usermemory.c **** 		CopyDataBytes(
 288:src/usermemory.c **** 				(uint8*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1657              		.loc 1 288 59
 1658 0054 3B8A     		ldrh	r3, [r7, #16]
 1659 0056 DB02     		lsls	r3, r3, #11
 287:src/usermemory.c **** 				(uint8*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1660              		.loc 1 287 3
 1661 0058 03F10063 		add	r3, r3, #134217728
 1662 005c 03F52C33 		add	r3, r3, #176128
 1663 0060 4FF40062 		mov	r2, #2048
 1664 0064 8549     		ldr	r1, .L89+8
 1665 0066 1846     		mov	r0, r3
 1666 0068 854B     		ldr	r3, .L89+12
 1667 006a 9847     		blx	r3
 1668              	.LVL40:
 289:src/usermemory.c **** 				(uint8*) bigFlashBuff, 0x800);
 290:src/usermemory.c **** 		CopyDataBytes((uint8*) pxSrc, (uint8*) (&bigFlashBuff[pageOffset]),
 1669              		.loc 1 290 56
 1670 006c BB89     		ldrh	r3, [r7, #12]
 1671              		.loc 1 290 43
 1672 006e 5B00     		lsls	r3, r3, #1
 1673 0070 824A     		ldr	r2, .L89+8
 1674 0072 9918     		adds	r1, r3, r2
 291:src/usermemory.c **** 				(0x400 - pageOffset) * 2);
 1675              		.loc 1 291 12
 1676 0074 BB89     		ldrh	r3, [r7, #12]
 1677 0076 C3F58063 		rsb	r3, r3, #1024
 290:src/usermemory.c **** 				(0x400 - pageOffset) * 2);
 1678              		.loc 1 290 3
 1679 007a 9BB2     		uxth	r3, r3
 1680 007c 5B00     		lsls	r3, r3, #1
 1681 007e 9BB2     		uxth	r3, r3
 1682 0080 1A46     		mov	r2, r3
 1683 0082 3868     		ldr	r0, [r7]
 1684 0084 7E4B     		ldr	r3, .L89+12
 1685 0086 9847     		blx	r3
 1686              	.LVL41:
 292:src/usermemory.c **** 
 293:src/usermemory.c **** 		while (FLASH_ErasePage(DEVICE_FLASHMEM_LOCATION + 0x800 * page)
 1687              		.loc 1 293 9
 1688 0088 09E0     		b	.L75
 1689              	.L76:
 1690              	.LBB4:
 294:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 295:src/usermemory.c **** 			status = FLASH_GetStatus();
 1691              		.loc 1 295 13
 1692 008a 7E4B     		ldr	r3, .L89+16
 1693 008c 9847     		blx	r3
 1694              	.LVL42:
 1695 008e 0346     		mov	r3, r0
 1696 0090 7B72     		strb	r3, [r7, #9]
 296:src/usermemory.c **** 			FLASH_ClearFlag(
 1697              		.loc 1 296 4
 1698 0092 3420     		movs	r0, #52
 1699 0094 7C4B     		ldr	r3, .L89+20
 1700 0096 9847     		blx	r3
 1701              	.LVL43:
 297:src/usermemory.c **** 					FLASH_FLAG_EOP | FLASH_FLAG_PGERR | FLASH_FLAG_WRPRTERR);
 298:src/usermemory.c **** 			vTaskDelay(20);
 1702              		.loc 1 298 4
 1703 0098 1420     		movs	r0, #20
 1704 009a 7C4B     		ldr	r3, .L89+24
 1705 009c 9847     		blx	r3
 1706              	.LVL44:
 1707              	.L75:
 1708              	.LBE4:
 293:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 1709              		.loc 1 293 51
 1710 009e 3B8A     		ldrh	r3, [r7, #16]
 1711 00a0 03F58033 		add	r3, r3, #65536
 1712 00a4 5633     		adds	r3, r3, #86
 1713 00a6 DB02     		lsls	r3, r3, #11
 293:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 1714              		.loc 1 293 10
 1715 00a8 1846     		mov	r0, r3
 1716 00aa 794B     		ldr	r3, .L89+28
 1717 00ac 9847     		blx	r3
 1718              	.LVL45:
 1719 00ae 0346     		mov	r3, r0
 293:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 1720              		.loc 1 293 9
 1721 00b0 042B     		cmp	r3, #4
 1722 00b2 EAD1     		bne	.L76
 299:src/usermemory.c **** 		}
 300:src/usermemory.c **** 
 301:src/usermemory.c **** 		WriteFlash((void*) (bigFlashBuff),
 302:src/usermemory.c **** 				(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1723              		.loc 1 302 58
 1724 00b4 3B8A     		ldrh	r3, [r7, #16]
 1725 00b6 DB02     		lsls	r3, r3, #11
 1726              		.loc 1 302 50
 1727 00b8 03F10063 		add	r3, r3, #134217728
 1728 00bc 03F52C33 		add	r3, r3, #176128
 301:src/usermemory.c **** 				(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1729              		.loc 1 301 3
 1730 00c0 4FF40062 		mov	r2, #2048
 1731 00c4 1946     		mov	r1, r3
 1732 00c6 6D48     		ldr	r0, .L89+8
 1733 00c8 724B     		ldr	r3, .L89+32
 1734 00ca 9847     		blx	r3
 1735              	.LVL46:
 303:src/usermemory.c **** 				0x800);
 304:src/usermemory.c **** 		vTaskDelay(100);
 1736              		.loc 1 304 3
 1737 00cc 6420     		movs	r0, #100
 1738 00ce 6F4B     		ldr	r3, .L89+24
 1739 00d0 9847     		blx	r3
 1740              	.LVL47:
 305:src/usermemory.c **** 
 306:src/usermemory.c **** 		while (FLASH_GetStatus() != FLASH_COMPLETE) {
 1741              		.loc 1 306 9
 1742 00d2 11E0     		b	.L77
 1743              	.L78:
 307:src/usermemory.c **** 			FLASH_ClearFlag(
 1744              		.loc 1 307 4
 1745 00d4 3420     		movs	r0, #52
 1746 00d6 6C4B     		ldr	r3, .L89+20
 1747 00d8 9847     		blx	r3
 1748              	.LVL48:
 308:src/usermemory.c **** 					FLASH_FLAG_EOP | FLASH_FLAG_PGERR | FLASH_FLAG_WRPRTERR);
 309:src/usermemory.c **** 			WriteFlash((void*) (bigFlashBuff),
 310:src/usermemory.c **** 					(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1749              		.loc 1 310 59
 1750 00da 3B8A     		ldrh	r3, [r7, #16]
 1751 00dc DB02     		lsls	r3, r3, #11
 1752              		.loc 1 310 51
 1753 00de 03F10063 		add	r3, r3, #134217728
 1754 00e2 03F52C33 		add	r3, r3, #176128
 309:src/usermemory.c **** 					(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1755              		.loc 1 309 4
 1756 00e6 4FF40062 		mov	r2, #2048
 1757 00ea 1946     		mov	r1, r3
 1758 00ec 6348     		ldr	r0, .L89+8
 1759 00ee 694B     		ldr	r3, .L89+32
 1760 00f0 9847     		blx	r3
 1761              	.LVL49:
 311:src/usermemory.c **** 					0x800);
 312:src/usermemory.c **** 			vTaskDelay(100);
 1762              		.loc 1 312 4
 1763 00f2 6420     		movs	r0, #100
 1764 00f4 654B     		ldr	r3, .L89+24
 1765 00f6 9847     		blx	r3
 1766              	.LVL50:
 1767              	.L77:
 306:src/usermemory.c **** 			FLASH_ClearFlag(
 1768              		.loc 1 306 10
 1769 00f8 624B     		ldr	r3, .L89+16
 1770 00fa 9847     		blx	r3
 1771              	.LVL51:
 1772 00fc 0346     		mov	r3, r0
 306:src/usermemory.c **** 			FLASH_ClearFlag(
 1773              		.loc 1 306 9
 1774 00fe 042B     		cmp	r3, #4
 1775 0100 E8D1     		bne	.L78
 313:src/usermemory.c **** 		}
 314:src/usermemory.c **** 		//=================================Second part
 315:src/usermemory.c **** 		CopyDataBytes(
 316:src/usermemory.c **** 				(uint8*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * pageEnd),
 1776              		.loc 1 316 59
 1777 0102 FB89     		ldrh	r3, [r7, #14]
 1778 0104 DB02     		lsls	r3, r3, #11
 315:src/usermemory.c **** 				(uint8*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * pageEnd),
 1779              		.loc 1 315 3
 1780 0106 03F10063 		add	r3, r3, #134217728
 1781 010a 03F52C33 		add	r3, r3, #176128
 1782 010e 4FF40062 		mov	r2, #2048
 1783 0112 5A49     		ldr	r1, .L89+8
 1784 0114 1846     		mov	r0, r3
 1785 0116 5A4B     		ldr	r3, .L89+12
 1786 0118 9847     		blx	r3
 1787              	.LVL52:
 317:src/usermemory.c **** 				(uint8*) bigFlashBuff, 0x800);
 318:src/usermemory.c **** 		CopyDataBytes(((uint8*) pxSrc) + (len - pageEndOffset) * 2,
 1788              		.loc 1 318 41
 1789 011a BA88     		ldrh	r2, [r7, #4]
 1790 011c 7B89     		ldrh	r3, [r7, #10]
 1791 011e D31A     		subs	r3, r2, r3
 1792              		.loc 1 318 58
 1793 0120 5B00     		lsls	r3, r3, #1
 1794 0122 1A46     		mov	r2, r3
 1795              		.loc 1 318 3
 1796 0124 3B68     		ldr	r3, [r7]
 1797 0126 9818     		adds	r0, r3, r2
 1798 0128 7B89     		ldrh	r3, [r7, #10]	@ movhi
 1799 012a 5B00     		lsls	r3, r3, #1
 1800 012c 9BB2     		uxth	r3, r3
 1801 012e 1A46     		mov	r2, r3
 1802 0130 5249     		ldr	r1, .L89+8
 1803 0132 534B     		ldr	r3, .L89+12
 1804 0134 9847     		blx	r3
 1805              	.LVL53:
 319:src/usermemory.c **** 				(uint8*) (&bigFlashBuff[0]), pageEndOffset * 2);
 320:src/usermemory.c **** 
 321:src/usermemory.c **** 		while (FLASH_ErasePage(DEVICE_FLASHMEM_LOCATION + 0x800 * pageEnd)
 1806              		.loc 1 321 9
 1807 0136 09E0     		b	.L79
 1808              	.L80:
 322:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 323:src/usermemory.c **** 			status = FLASH_GetStatus();
 1809              		.loc 1 323 13
 1810 0138 524B     		ldr	r3, .L89+16
 1811 013a 9847     		blx	r3
 1812              	.LVL54:
 1813 013c 0346     		mov	r3, r0
 1814 013e 7B72     		strb	r3, [r7, #9]
 324:src/usermemory.c **** 			FLASH_ClearFlag(
 1815              		.loc 1 324 4
 1816 0140 3420     		movs	r0, #52
 1817 0142 514B     		ldr	r3, .L89+20
 1818 0144 9847     		blx	r3
 1819              	.LVL55:
 325:src/usermemory.c **** 					FLASH_FLAG_EOP | FLASH_FLAG_PGERR | FLASH_FLAG_WRPRTERR);
 326:src/usermemory.c **** 			vTaskDelay(20);
 1820              		.loc 1 326 4
 1821 0146 1420     		movs	r0, #20
 1822 0148 504B     		ldr	r3, .L89+24
 1823 014a 9847     		blx	r3
 1824              	.LVL56:
 1825              	.L79:
 321:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 1826              		.loc 1 321 51
 1827 014c FB89     		ldrh	r3, [r7, #14]
 1828 014e 03F58033 		add	r3, r3, #65536
 1829 0152 5633     		adds	r3, r3, #86
 1830 0154 DB02     		lsls	r3, r3, #11
 321:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 1831              		.loc 1 321 10
 1832 0156 1846     		mov	r0, r3
 1833 0158 4D4B     		ldr	r3, .L89+28
 1834 015a 9847     		blx	r3
 1835              	.LVL57:
 1836 015c 0346     		mov	r3, r0
 321:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 1837              		.loc 1 321 9
 1838 015e 042B     		cmp	r3, #4
 1839 0160 EAD1     		bne	.L80
 327:src/usermemory.c **** 		}
 328:src/usermemory.c **** 
 329:src/usermemory.c **** 		WriteFlash((void*) (bigFlashBuff),
 330:src/usermemory.c **** 				(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * pageEnd),
 1840              		.loc 1 330 58
 1841 0162 FB89     		ldrh	r3, [r7, #14]
 1842 0164 DB02     		lsls	r3, r3, #11
 1843              		.loc 1 330 50
 1844 0166 03F10063 		add	r3, r3, #134217728
 1845 016a 03F52C33 		add	r3, r3, #176128
 329:src/usermemory.c **** 				(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * pageEnd),
 1846              		.loc 1 329 3
 1847 016e 4FF40062 		mov	r2, #2048
 1848 0172 1946     		mov	r1, r3
 1849 0174 4148     		ldr	r0, .L89+8
 1850 0176 474B     		ldr	r3, .L89+32
 1851 0178 9847     		blx	r3
 1852              	.LVL58:
 331:src/usermemory.c **** 				0x800);
 332:src/usermemory.c **** 		vTaskDelay(100);
 1853              		.loc 1 332 3
 1854 017a 6420     		movs	r0, #100
 1855 017c 434B     		ldr	r3, .L89+24
 1856 017e 9847     		blx	r3
 1857              	.LVL59:
 333:src/usermemory.c **** 		while (FLASH_GetStatus() != FLASH_COMPLETE) {
 1858              		.loc 1 333 9
 1859 0180 11E0     		b	.L81
 1860              	.L82:
 334:src/usermemory.c **** 			FLASH_ClearFlag(
 1861              		.loc 1 334 4
 1862 0182 3420     		movs	r0, #52
 1863 0184 404B     		ldr	r3, .L89+20
 1864 0186 9847     		blx	r3
 1865              	.LVL60:
 335:src/usermemory.c **** 					FLASH_FLAG_EOP | FLASH_FLAG_PGERR | FLASH_FLAG_WRPRTERR);
 336:src/usermemory.c **** 			WriteFlash((void*) (bigFlashBuff),
 337:src/usermemory.c **** 					(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION)
 338:src/usermemory.c **** 							+ 0x800 * pageEnd), 0x800);
 1866              		.loc 1 338 16
 1867 0188 FB89     		ldrh	r3, [r7, #14]
 1868 018a DB02     		lsls	r3, r3, #11
 1869              		.loc 1 338 8
 1870 018c 03F10063 		add	r3, r3, #134217728
 1871 0190 03F52C33 		add	r3, r3, #176128
 336:src/usermemory.c **** 					(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION)
 1872              		.loc 1 336 4
 1873 0194 4FF40062 		mov	r2, #2048
 1874 0198 1946     		mov	r1, r3
 1875 019a 3848     		ldr	r0, .L89+8
 1876 019c 3D4B     		ldr	r3, .L89+32
 1877 019e 9847     		blx	r3
 1878              	.LVL61:
 339:src/usermemory.c **** 			vTaskDelay(100);
 1879              		.loc 1 339 4
 1880 01a0 6420     		movs	r0, #100
 1881 01a2 3A4B     		ldr	r3, .L89+24
 1882 01a4 9847     		blx	r3
 1883              	.LVL62:
 1884              	.L81:
 333:src/usermemory.c **** 			FLASH_ClearFlag(
 1885              		.loc 1 333 10
 1886 01a6 374B     		ldr	r3, .L89+16
 1887 01a8 9847     		blx	r3
 1888              	.LVL63:
 1889 01aa 0346     		mov	r3, r0
 333:src/usermemory.c **** 			FLASH_ClearFlag(
 1890              		.loc 1 333 9
 1891 01ac 042B     		cmp	r3, #4
 1892 01ae E8D1     		bne	.L82
 1893 01b0 53E0     		b	.L83
 1894              	.L74:
 1895              	.LBE3:
 1896              	.LBB5:
 340:src/usermemory.c **** 		}
 341:src/usermemory.c **** 	} else {
 342:src/usermemory.c **** 		CopyDataBytes(
 343:src/usermemory.c **** 				(uint8*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1897              		.loc 1 343 59
 1898 01b2 3B8A     		ldrh	r3, [r7, #16]
 1899 01b4 DB02     		lsls	r3, r3, #11
 342:src/usermemory.c **** 				(uint8*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1900              		.loc 1 342 3
 1901 01b6 03F10063 		add	r3, r3, #134217728
 1902 01ba 03F52C33 		add	r3, r3, #176128
 1903 01be 4FF40062 		mov	r2, #2048
 1904 01c2 2E49     		ldr	r1, .L89+8
 1905 01c4 1846     		mov	r0, r3
 1906 01c6 2E4B     		ldr	r3, .L89+12
 1907 01c8 9847     		blx	r3
 1908              	.LVL64:
 344:src/usermemory.c **** 				(uint8*) bigFlashBuff, 0x800);
 345:src/usermemory.c **** 		CopyDataBytes((uint8*) pxSrc, (uint8*) (&bigFlashBuff[pageOffset]),
 1909              		.loc 1 345 56
 1910 01ca BB89     		ldrh	r3, [r7, #12]
 1911              		.loc 1 345 43
 1912 01cc 5B00     		lsls	r3, r3, #1
 1913 01ce 2B4A     		ldr	r2, .L89+8
 1914 01d0 9918     		adds	r1, r3, r2
 1915              		.loc 1 345 3
 1916 01d2 BB88     		ldrh	r3, [r7, #4]	@ movhi
 1917 01d4 5B00     		lsls	r3, r3, #1
 1918 01d6 9BB2     		uxth	r3, r3
 1919 01d8 1A46     		mov	r2, r3
 1920 01da 3868     		ldr	r0, [r7]
 1921 01dc 284B     		ldr	r3, .L89+12
 1922 01de 9847     		blx	r3
 1923              	.LVL65:
 346:src/usermemory.c **** 				len * 2);
 347:src/usermemory.c **** 
 348:src/usermemory.c **** 		while (FLASH_ErasePage(DEVICE_FLASHMEM_LOCATION + 0x800 * page)
 1924              		.loc 1 348 9
 1925 01e0 09E0     		b	.L84
 1926              	.L85:
 1927              	.LBB6:
 349:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 350:src/usermemory.c **** 			status = FLASH_GetStatus();
 1928              		.loc 1 350 13
 1929 01e2 284B     		ldr	r3, .L89+16
 1930 01e4 9847     		blx	r3
 1931              	.LVL66:
 1932 01e6 0346     		mov	r3, r0
 1933 01e8 7B72     		strb	r3, [r7, #9]
 351:src/usermemory.c **** 			FLASH_ClearFlag(
 1934              		.loc 1 351 4
 1935 01ea 3420     		movs	r0, #52
 1936 01ec 264B     		ldr	r3, .L89+20
 1937 01ee 9847     		blx	r3
 1938              	.LVL67:
 352:src/usermemory.c **** 					FLASH_FLAG_EOP | FLASH_FLAG_PGERR | FLASH_FLAG_WRPRTERR);
 353:src/usermemory.c **** 			vTaskDelay(20);
 1939              		.loc 1 353 4
 1940 01f0 1420     		movs	r0, #20
 1941 01f2 264B     		ldr	r3, .L89+24
 1942 01f4 9847     		blx	r3
 1943              	.LVL68:
 1944              	.L84:
 1945              	.LBE6:
 348:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 1946              		.loc 1 348 51
 1947 01f6 3B8A     		ldrh	r3, [r7, #16]
 1948 01f8 03F58033 		add	r3, r3, #65536
 1949 01fc 5633     		adds	r3, r3, #86
 1950 01fe DB02     		lsls	r3, r3, #11
 348:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 1951              		.loc 1 348 10
 1952 0200 1846     		mov	r0, r3
 1953 0202 234B     		ldr	r3, .L89+28
 1954 0204 9847     		blx	r3
 1955              	.LVL69:
 1956 0206 0346     		mov	r3, r0
 348:src/usermemory.c **** 				!= FLASH_COMPLETE) {
 1957              		.loc 1 348 9
 1958 0208 042B     		cmp	r3, #4
 1959 020a EAD1     		bne	.L85
 354:src/usermemory.c **** 		}
 355:src/usermemory.c **** 
 356:src/usermemory.c **** 		WriteFlash((void*) (bigFlashBuff),
 357:src/usermemory.c **** 				(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1960              		.loc 1 357 58
 1961 020c 3B8A     		ldrh	r3, [r7, #16]
 1962 020e DB02     		lsls	r3, r3, #11
 1963              		.loc 1 357 50
 1964 0210 03F10063 		add	r3, r3, #134217728
 1965 0214 03F52C33 		add	r3, r3, #176128
 356:src/usermemory.c **** 				(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1966              		.loc 1 356 3
 1967 0218 4FF40062 		mov	r2, #2048
 1968 021c 1946     		mov	r1, r3
 1969 021e 1748     		ldr	r0, .L89+8
 1970 0220 1C4B     		ldr	r3, .L89+32
 1971 0222 9847     		blx	r3
 1972              	.LVL70:
 358:src/usermemory.c **** 				0x800);
 359:src/usermemory.c **** 		vTaskDelay(100);
 1973              		.loc 1 359 3
 1974 0224 6420     		movs	r0, #100
 1975 0226 194B     		ldr	r3, .L89+24
 1976 0228 9847     		blx	r3
 1977              	.LVL71:
 360:src/usermemory.c **** 		while (FLASH_GetStatus() != FLASH_COMPLETE) {
 1978              		.loc 1 360 9
 1979 022a 11E0     		b	.L86
 1980              	.L87:
 361:src/usermemory.c **** 			FLASH_ClearFlag(
 1981              		.loc 1 361 4
 1982 022c 3420     		movs	r0, #52
 1983 022e 164B     		ldr	r3, .L89+20
 1984 0230 9847     		blx	r3
 1985              	.LVL72:
 362:src/usermemory.c **** 					FLASH_FLAG_EOP | FLASH_FLAG_PGERR | FLASH_FLAG_WRPRTERR);
 363:src/usermemory.c **** 			WriteFlash((void*) (bigFlashBuff),
 364:src/usermemory.c **** 					(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1986              		.loc 1 364 59
 1987 0232 3B8A     		ldrh	r3, [r7, #16]
 1988 0234 DB02     		lsls	r3, r3, #11
 1989              		.loc 1 364 51
 1990 0236 03F10063 		add	r3, r3, #134217728
 1991 023a 03F52C33 		add	r3, r3, #176128
 363:src/usermemory.c **** 					(void*) ((uint8*) (DEVICE_FLASHMEM_LOCATION) + 0x800 * page),
 1992              		.loc 1 363 4
 1993 023e 4FF40062 		mov	r2, #2048
 1994 0242 1946     		mov	r1, r3
 1995 0244 0D48     		ldr	r0, .L89+8
 1996 0246 134B     		ldr	r3, .L89+32
 1997 0248 9847     		blx	r3
 1998              	.LVL73:
 365:src/usermemory.c **** 					0x800);
 366:src/usermemory.c **** 			vTaskDelay(100);
 1999              		.loc 1 366 4
 2000 024a 6420     		movs	r0, #100
 2001 024c 0F4B     		ldr	r3, .L89+24
 2002 024e 9847     		blx	r3
 2003              	.LVL74:
 2004              	.L86:
 360:src/usermemory.c **** 			FLASH_ClearFlag(
 2005              		.loc 1 360 10
 2006 0250 0C4B     		ldr	r3, .L89+16
 2007 0252 9847     		blx	r3
 2008              	.LVL75:
 2009 0254 0346     		mov	r3, r0
 360:src/usermemory.c **** 			FLASH_ClearFlag(
 2010              		.loc 1 360 9
 2011 0256 042B     		cmp	r3, #4
 2012 0258 E8D1     		bne	.L87
 2013              	.L83:
 2014              	.LBE5:
 367:src/usermemory.c **** 		}
 368:src/usermemory.c **** 	}
 369:src/usermemory.c **** 	FLASH_Lock();
 2015              		.loc 1 369 2
 2016 025a 0F4B     		ldr	r3, .L89+36
 2017 025c 9847     		blx	r3
 2018              	.LVL76:
 370:src/usermemory.c **** 	atcResetCounter();
 2019              		.loc 1 370 2
 2020 025e 0F4B     		ldr	r3, .L89+40
 2021 0260 9847     		blx	r3
 2022              	.LVL77:
 371:src/usermemory.c **** 	JournalConf(tempadr);
 2023              		.loc 1 371 2
 2024 0262 7B8A     		ldrh	r3, [r7, #18]
 2025 0264 1846     		mov	r0, r3
 2026 0266 0E4B     		ldr	r3, .L89+44
 2027 0268 9847     		blx	r3
 2028              	.LVL78:
 372:src/usermemory.c **** 	return true;
 2029              		.loc 1 372 9
 2030 026a 0123     		movs	r3, #1
 373:src/usermemory.c **** }
 2031              		.loc 1 373 1
 2032 026c 1846     		mov	r0, r3
 2033 026e 1837     		adds	r7, r7, #24
 2034              	.LCFI48:
 2035              		.cfi_def_cfa_offset 8
 2036 0270 BD46     		mov	sp, r7
 2037              	.LCFI49:
 2038              		.cfi_def_cfa_register 13
 2039              		@ sp needed
 2040 0272 80BD     		pop	{r7, pc}
 2041              	.L90:
 2042              		.align	2
 2043              	.L89:
 2044 0274 00B00208 		.word	134393856
 2045 0278 00000000 		.word	FLASH_Unlock
 2046 027c 00000000 		.word	bigFlashBuff
 2047 0280 00000000 		.word	CopyDataBytes
 2048 0284 00000000 		.word	FLASH_GetStatus
 2049 0288 00000000 		.word	FLASH_ClearFlag
 2050 028c 00000000 		.word	vTaskDelay
 2051 0290 00000000 		.word	FLASH_ErasePage
 2052 0294 00000000 		.word	WriteFlash
 2053 0298 00000000 		.word	FLASH_Lock
 2054 029c 00000000 		.word	atcResetCounter
 2055 02a0 00000000 		.word	JournalConf
 2056              		.cfi_endproc
 2057              	.LFE36:
 2059              		.section	.text.Buffercmp,"ax",%progbits
 2060              		.align	1
 2061              		.global	Buffercmp
 2062              		.syntax unified
 2063              		.thumb
 2064              		.thumb_func
 2066              	Buffercmp:
 2067              	.LFB37:
 374:src/usermemory.c **** 
 375:src/usermemory.c **** bool Buffercmp(uint8_t *pBuffer1, uint8_t *pBuffer2, uint16_t BufferLength) {
 2068              		.loc 1 375 77
 2069              		.cfi_startproc
 2070              		@ args = 0, pretend = 0, frame = 24
 2071              		@ frame_needed = 1, uses_anonymous_args = 0
 2072              		@ link register save eliminated.
 2073 0000 80B4     		push	{r7}
 2074              	.LCFI50:
 2075              		.cfi_def_cfa_offset 4
 2076              		.cfi_offset 7, -4
 2077 0002 87B0     		sub	sp, sp, #28
 2078              	.LCFI51:
 2079              		.cfi_def_cfa_offset 32
 2080 0004 00AF     		add	r7, sp, #0
 2081              	.LCFI52:
 2082              		.cfi_def_cfa_register 7
 2083 0006 F860     		str	r0, [r7, #12]
 2084 0008 B960     		str	r1, [r7, #8]
 2085 000a 1346     		mov	r3, r2
 2086 000c FB80     		strh	r3, [r7, #6]	@ movhi
 376:src/usermemory.c **** 	FLASHMEM *pxConfig = (FLASHMEM*) DEVICE_FLASHMEM_LOCATION;
 2087              		.loc 1 376 12
 2088 000e 0E4B     		ldr	r3, .L96
 2089 0010 7B61     		str	r3, [r7, #20]
 377:src/usermemory.c **** 	while (BufferLength--) {
 2090              		.loc 1 377 8
 2091 0012 0DE0     		b	.L92
 2092              	.L95:
 378:src/usermemory.c **** 		if (*pBuffer1 != *pBuffer2) {
 2093              		.loc 1 378 7
 2094 0014 FB68     		ldr	r3, [r7, #12]
 2095 0016 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2096              		.loc 1 378 20
 2097 0018 BB68     		ldr	r3, [r7, #8]
 2098 001a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2099              		.loc 1 378 6
 2100 001c 9A42     		cmp	r2, r3
 2101 001e 01D0     		beq	.L93
 379:src/usermemory.c **** 			return false;
 2102              		.loc 1 379 11
 2103 0020 0023     		movs	r3, #0
 2104 0022 0BE0     		b	.L94
 2105              	.L93:
 380:src/usermemory.c **** 		}
 381:src/usermemory.c **** 
 382:src/usermemory.c **** 		pBuffer1++;
 2106              		.loc 1 382 11
 2107 0024 FB68     		ldr	r3, [r7, #12]
 2108 0026 0133     		adds	r3, r3, #1
 2109 0028 FB60     		str	r3, [r7, #12]
 383:src/usermemory.c **** 		pBuffer2++;
 2110              		.loc 1 383 11
 2111 002a BB68     		ldr	r3, [r7, #8]
 2112 002c 0133     		adds	r3, r3, #1
 2113 002e BB60     		str	r3, [r7, #8]
 2114              	.L92:
 377:src/usermemory.c **** 		if (*pBuffer1 != *pBuffer2) {
 2115              		.loc 1 377 21
 2116 0030 FB88     		ldrh	r3, [r7, #6]
 2117 0032 5A1E     		subs	r2, r3, #1
 2118 0034 FA80     		strh	r2, [r7, #6]	@ movhi
 377:src/usermemory.c **** 		if (*pBuffer1 != *pBuffer2) {
 2119              		.loc 1 377 8
 2120 0036 002B     		cmp	r3, #0
 2121 0038 ECD1     		bne	.L95
 384:src/usermemory.c **** 	}
 385:src/usermemory.c **** 
 386:src/usermemory.c **** 	return true;
 2122              		.loc 1 386 9
 2123 003a 0123     		movs	r3, #1
 2124              	.L94:
 387:src/usermemory.c **** }
 2125              		.loc 1 387 1
 2126 003c 1846     		mov	r0, r3
 2127 003e 1C37     		adds	r7, r7, #28
 2128              	.LCFI53:
 2129              		.cfi_def_cfa_offset 4
 2130 0040 BD46     		mov	sp, r7
 2131              	.LCFI54:
 2132              		.cfi_def_cfa_register 13
 2133              		@ sp needed
 2134 0042 80BC     		pop	{r7}
 2135              	.LCFI55:
 2136              		.cfi_restore 7
 2137              		.cfi_def_cfa_offset 0
 2138 0044 7047     		bx	lr
 2139              	.L97:
 2140 0046 00BF     		.align	2
 2141              	.L96:
 2142 0048 00B00208 		.word	134393856
 2143              		.cfi_endproc
 2144              	.LFE37:
 2146              		.text
 2147              	.Letext0:
 2148              		.file 2 "common/rtos/common/utils/typedef.h"
 2149              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 2150              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 2151              		.file 5 "common/lib.stm32/STM32F10x_StdPeriph_Driver/inc/stm32f10x_flash.h"
 2152              		.file 6 "common/rtos/include/queue.h"
 2153              		.file 7 "common/rtos/include/semphr.h"
 2154              		.file 8 "common/rtos/common/utils/memman.h"
 2155              		.file 9 "src/usermemory.h"
 2156              		.file 10 "common/rtos/common/driver/rtclock.h"
 2157              		.file 11 "src/journal.h"
 2158              		.file 12 "src/i2c_ee.h"
 2159              		.file 13 "<built-in>"
DEFINED SYMBOLS
                            *ABS*:00000000 usermemory.c
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:22     .bss.RAM:00000000 RAM
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:19     .bss.RAM:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:29     .bss.tmpPointer:00000000 tmpPointer
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:26     .bss.tmpPointer:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:36     .bss.tmpLen:00000000 tmpLen
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:33     .bss.tmpLen:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:42     .bss.EEPROM_working:00000000 EEPROM_working
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:43     .bss.EEPROM_working:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:49     .bss.bigFlashBuff:00000000 bigFlashBuff
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:46     .bss.bigFlashBuff:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:56     .bss.DeviceID:00000000 DeviceID
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:53     .bss.DeviceID:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:59     .text.MemInit:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:65     .text.MemInit:00000000 MemInit
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:212    .text.MemInit:000000c8 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:238    .text.GetRam:00000000 GetRam
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:316    .text.SetRam:00000000 SetRam
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:413    .text.GetSignature:00000000 GetSignature
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:957    .text.GetRtc:00000000 GetRtc
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:1308   .text.SetRtc:00000000 SetRtc
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:588    .text.GetEeprom:00000000 GetEeprom
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:744    .text.SetEeprom:00000000 SetEeprom
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:1511   .text.GetFlash:00000000 GetFlash
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:1591   .text.SetFlash:00000000 SetFlash
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:232    .text.GetRam:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:301    .text.GetRam:00000040 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:310    .text.SetRam:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:379    .text.SetRam:00000040 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:388    .rodata:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:407    .text.GetSignature:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:567    .text.GetSignature:000000c8 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:582    .text.GetEeprom:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:731    .text.GetEeprom:000000f4 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:738    .text.SetEeprom:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:943    .text.SetEeprom:00000160 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:2066   .text.Buffercmp:00000000 Buffercmp
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:951    .text.GetRtc:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:1290   .text.GetRtc:000001d4 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:1302   .text.SetRtc:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:1493   .text.SetRtc:000000f8 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:1505   .text.GetFlash:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:1577   .text.GetFlash:00000044 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:1585   .text.SetFlash:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:2044   .text.SetFlash:00000274 $d
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:2060   .text.Buffercmp:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccbc6485.s:2142   .text.Buffercmp:00000048 $d

UNDEFINED SYMBOLS
I2C_Configuration
FLASH_Unlock
FLASH_SetLatency
MemManInit
memunit
atcResetCounter
CountReset
CopyDataBytes
strlen
I2C_EE_BufferRead
I2C_EE_BufferWrite
vTaskDelay
rtcGetDataTime
rtcGetiFixDateTime
rtcSetiFixDateTime
rtcSetDataTime
FLASH_GetStatus
FLASH_ClearFlag
FLASH_ErasePage
WriteFlash
FLASH_Lock
JournalConf
